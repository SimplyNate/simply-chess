{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/menus/Play.vue?f182","webpack:///./src/assets/pieces/81.svg","webpack:///./src/assets/pieces/98.svg","webpack:///./src/assets/pieces/75.svg","webpack:///./src/assets/pieces/112.svg","webpack:///./src/assets/pieces/78.svg","webpack:///./src/assets/pieces/107.svg","webpack:///./src/assets/pieces/82.svg","webpack:///./src/assets/pieces/66.svg","webpack:///./src/menus/MainMenu.vue?1942","webpack:///./src/assets/pieces/114.svg","webpack:///./src/assets/pieces/80.svg","webpack:///./src/App.vue?6200","webpack:///./src/App.vue?3be4","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/menus/MainMenu.vue?7ceb","webpack:///./src/menus/MainMenu.vue","webpack:///./src/menus/MainMenu.vue?9933","webpack:///./src/menus/Play.vue?ae35","webpack:///./src/board/CanvasBoard.vue?6a06","webpack:///./src/utils/utils.ts","webpack:///./src/board/Collision.ts","webpack:///./src/board/CanvasBoard.vue","webpack:///./src/board/CanvasBoard.vue?3b94","webpack:///./src/engine/pieces/Piece.ts","webpack:///./src/engine/pieces/Pawn.ts","webpack:///./src/engine/pieces/Knight.ts","webpack:///./src/engine/pieces/King.ts","webpack:///./src/engine/pieces/Queen.ts","webpack:///./src/engine/pieces/Bishop.ts","webpack:///./src/engine/pieces/Rook.ts","webpack:///./src/engine/Chess.ts","webpack:///./src/engine/ai/AI.ts","webpack:///./src/engine/ai/RandomMover.ts","webpack:///./src/engine/ai/MatrixEvaluator.ts","webpack:///./src/menus/Play.vue","webpack:///./src/menus/Play.vue?04ef","webpack:///./src/router.ts","webpack:///./src/main.ts","webpack:///./src/assets/pieces/113.svg","webpack:///./src/assets/pieces/110.svg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_router_view","__exports__","_withScopeId","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","style","_hoisted_20","onClick","args","startGame","type","$event","load","placeholder","playAs","useAi","selectedAi","aiList","ai","methods","this","validateFen","game","$router","id","_component_canvas_board","engine","fen","piecePlacement","activeColor","castlingAvailability","enPassantTargetSquare","halfMoveClock","fullMoveNumber","checkStatus","checkMateStatus","tie","selectedPiece","legalMoves","restart","containerWidth","containerHeight","isMounted","fenString","onSelected","calculateLegalMoves","onDeselected","clearLegalMoves","onMove","makeMove","ref","separateFEN","split","Number","stringifyFEN","convertRowToArray","row","positions","char","charCodeAt","number","fillArray","Array","fill","parsePlacementToMap","map","rows","rank","f","filterAndSortPositionsToArray","filter","position","includes","sort","a","b","splitBoardMapToArray","boardMap","keys","rebuildPlacementFromMap","localAccumulator","piece","shiftChar","by","String","fromCharCode","rankAndFile","calculateCollision","x","y","node","globalOffset","bX1","bY1","bX2","width","bY2","height","getPointerCollision","px","py","legalSpaces","lastCollision","parent","filtered","Math","abs","place","emits","props","currentBoardRepresentation","default","boardConfig","legalMovesForSelection","app","containerLength","squareLength","boardContainer","pieces","textures","svgs","squareMap","dark","light","drag","dragData","dragNode","tempContainer","originalParent","highlight","originalPlace","closestTarget","legalTargets","placedPieces","freeSpaces","cachedCollision","watch","updateFEN","deep","highlightLegalMoves","applyConfig","element","$refs","board","antialias","resolution","devicePixelRatio","backgroundAlpha","resizeTo","calculateContainerLength","calculateSquareLength","loadSVGs","loadTextures","container","interactive","on","onDragMove","stage","addChild","appendChild","view","drawBoard","screen","pivot","calculateGlobalOffset","destroy","startX","startY","color","getColorForSquare","drawSquare","charCode","B","K","N","P","Q","R","k","q","from","clearPieces","placePieces","boardArray","pop","texture","sprite","isPieceInteractive","buttonMode","onDragStart","onDragEnd","anchor","set","boardSquare","alpha","squareContainer","square","beginFill","drawRect","endFill","event","currentTarget","createHighlight","selected","$emit","setParent","beginHole","endHole","movePayload","to","console","log","clearDrag","clearHighlight","newPosition","getLocalPosition","clearCollision","collision","move","parentWidth","parentHeight","moveType","lastPosition","code","parseCode","file","currentBoard","moves","isValidMovePosition","lowerRangeEnemyCodes","upperRangeEnemyCodes","lowerRangeAllyCodes","upperRangeAllyCodes","moveCharCode","defending","pieceCode","straight","diagonal","moveArray","lookUpLeft","lookUp","lookUpRight","lookDownRight","lookDown","lookDownLeft","lookLeft","lookRight","isMoveCapture","fileNumber","fileLowerBound","fileUpperBound","toLowerCase","toUpperCase","super","direction","inStartingPosition","newRank","move1","move2","leftFile","rightFile","possibleEPSquares","possibleSquare","enPassantCheck","isOppositeColor","filterValidMoves","canCastleShort","canCastleLong","checkCastlingForAttackers","canPerformCastleShort","checkPositions","good","castleShortPosition","canPerformCastleLong","castleLongPosition","currentCheckStatus","checkBy","currentInCheck","isInCheck","currentPosition","currentRank","currentFile","pos","boardCopy","JSON","parse","stringify","getCheckStatus","check","attackingPieceCode","attackers","piece1","piece2","aKnight","aPawn","aQueen","aRook","aBishop","possibleKnightPositions","findAttackersFromPositions","possiblePawnPositions","up","down","left","right","upLeft","upRight","downLeft","downRight","checkDirection","consecutiveMoveSearch","canCastle","castleSide","piecesByLocation","kings","parsePieces","resetLegalMovesAndCheckStatus","updateCheckMate","lightKing","darkKing","pieceInstance","piecesByColor","getLegalMoves","skipValidation","movePiece","capturedPiece","deleteLocation","deletePieceColor","updateEnPassant","updateCastling","fullMoveClock","replace","king","enemyPieces","kingMoves","dangerMoves","enemyPiece","defense","checkedByPiece","filteredMoves","checkType","enemyMoves","enemyLocation","validMoves","kingFile","enemyFile","startRank","endRank","fileTracker","pieceMoves","kingOriginalCheckStatus","kingOriginalCheckBy","testBoard","filterMovesCheck","filterKingMovesDanger","filterMovesThatExposeKing","justMoved","location","resetLegalMoves","processMovesForColor","updateCheckStatus","checkTieStatus","canMove","oppositeColor","isCheck","possibleMoves","allMoves","randInt","floor","random","Pawn","Knight","Bishop","Rook","Queen","King","capture","multiplier","pressure","danger","defended","score","evaluateMove","highScore","maxMoveScores","evaluatedPiece","boardOccupation","findPieceAtPosition","scores","piecesWithMovesAtPosition","findPiecesWithMovesToPosition","defenders","attacker","defender","moveIsForward","find","components","CanvasBoard","startingFen","$route","query","aiType","onResize","addEventListener","innerHeight","innerWidth","selection","payload","routes","path","component","MainMenu","Play","history","App","use","router","mount"],"mappings":"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","file":"js/app.a1892285.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/simply-chess/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Play.vue?vue&type=style&index=0&id=2aff1b75&lang=css\"","module.exports = __webpack_public_path__ + \"img/81.518cd5f8.svg\";","module.exports = __webpack_public_path__ + \"img/98.702c526d.svg\";","module.exports = __webpack_public_path__ + \"img/75.5aad6e48.svg\";","module.exports = __webpack_public_path__ + \"img/112.876f1ece.svg\";","module.exports = __webpack_public_path__ + \"img/78.e6294efe.svg\";","module.exports = __webpack_public_path__ + \"img/107.8805b9ad.svg\";","module.exports = __webpack_public_path__ + \"img/82.095b1a06.svg\";","module.exports = __webpack_public_path__ + \"img/66.54dd3ab6.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MainMenu.vue?vue&type=style&index=0&id=205d7497&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/114.174de4ee.svg\";","module.exports = __webpack_public_path__ + \"img/80.e38a4f66.svg\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=080ffed2&lang=css\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"app\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_router_view = _resolveComponent(\"router-view\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_router_view)\n  ]))\n}","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'App',\n});\n","import { render } from \"./App.vue?vue&type=template&id=080ffed2&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=080ffed2&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, vModelCheckbox as _vModelCheckbox, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-205d7497\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"fullscreen\" }\nconst _hoisted_2 = { class: \"container position-absolute top-50 start-50 translate-middle\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", { class: \"pb-3 pt-3 text-large\" }, \"Simply Chess\", -1))\nconst _hoisted_4 = { class: \"row\" }\nconst _hoisted_5 = { class: \"col border border-light rounded-1 ms-3 me-3\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", { class: \"pt-3\" }, \"Start a New Game\", -1))\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"pt-3\" }, \"Start a new game in default starting position.\", -1))\nconst _hoisted_8 = { class: \"col border border-light rounded-1 ms-3 me-3\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", { class: \"pt-3\" }, \"Load a Game\", -1))\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"pt-3\" }, \"Load an existing game using a FEN string.\", -1))\nconst _hoisted_11 = { class: \"input-group mb-3\" }\nconst _hoisted_12 = { class: \"row\" }\nconst _hoisted_13 = { class: \"col border border-light rounded-1 ms-3 me-3 mt-3\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Additional Settings\", -1))\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\"Play as: \")\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", null, \"light\", -1))\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", null, \"dark\", -1))\nconst _hoisted_18 = [\n  _hoisted_16,\n  _hoisted_17\n]\nconst _hoisted_19 = { style: {\"margin-bottom\":\".1em\"} }\nconst _hoisted_20 = /*#__PURE__*/_createTextVNode(\" Use AI?\")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"div\", _hoisted_5, [\n          _hoisted_6,\n          _hoisted_7,\n          _createElementVNode(\"button\", {\n            class: \"btn btn-success mb-3\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.startGame && _ctx.startGame(...args)))\n          }, \"New Game\")\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _hoisted_10,\n          _createElementVNode(\"div\", _hoisted_11, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"form-control\",\n              type: \"text\",\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.load) = $event)),\n              placeholder: \"Input FEN string here.\"\n            }, null, 512), [\n              [_vModelText, _ctx.load]\n            ]),\n            _createElementVNode(\"button\", {\n              class: \"btn btn-success\",\n              onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.startGame && _ctx.startGame(...args)))\n            }, \"Load Game\")\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"div\", null, [\n            _hoisted_15,\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.playAs) = $event))\n            }, _hoisted_18, 512), [\n              [_vModelSelect, _ctx.playAs]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_19, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.useAi) = $event))\n            }, null, 512), [\n              [_vModelCheckbox, _ctx.useAi]\n            ]),\n            _hoisted_20\n          ]),\n          (_ctx.useAi)\n            ? _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                key: 0,\n                style: {\"margin-bottom\":\".2em\"},\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.selectedAi) = $event))\n              }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.aiList, (ai) => {\n                  return (_openBlock(), _createElementBlock(\"option\", { key: ai }, _toDisplayString(ai), 1))\n                }), 128))\n              ], 512)), [\n                [_vModelSelect, _ctx.selectedAi]\n              ])\n            : _createCommentVNode(\"\", true)\n        ])\n      ])\n    ])\n  ]))\n}","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'MainMenu',\n    data() {\n        return {\n            load: null,\n            useAi: false,\n            aiList: [\n                'RandomMover',\n                'MatrixEvaluator',\n            ],\n            selectedAi: 'RandomMover',\n            playAs: 'light',\n        };\n    },\n    methods: {\n        validateFen(): boolean {\n            if (this.load) {\n                return true;\n            }\n            return true;\n        },\n        startGame() {\n            if (this.validateFen()) {\n                const game = this.load ? this.load : 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 0';\n                this.$router.push(`/play?fen=${game}&playAs=${this.playAs}&ai=${this.useAi}&aiType=${this.selectedAi}`);\n            }\n        },\n    },\n});\n","import { render } from \"./MainMenu.vue?vue&type=template&id=205d7497&scoped=true&ts=true\"\nimport script from \"./MainMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./MainMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./MainMenu.vue?vue&type=style&index=0&id=205d7497&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-205d7497\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"app\",\n  class: \"d-flex flex-row\"\n}\nconst _hoisted_2 = { class: \"side-menu mt-1 align-self-center\" }\nconst _hoisted_3 = { class: \"w-100\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Simply Chess\", -1)\nconst _hoisted_5 = {\n  key: 0,\n  class: \"w-100\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"w-100\"\n}\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Tie game!\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_canvas_board = _resolveComponent(\"canvas-board\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"p\", null, \"Piece Placement: \" + _toDisplayString(_ctx.engine.fen.piecePlacement), 1),\n        _createElementVNode(\"p\", null, \"Active Color: \" + _toDisplayString(_ctx.engine.fen.activeColor), 1),\n        _createElementVNode(\"p\", null, \"Castling Availability: \" + _toDisplayString(_ctx.engine.fen.castlingAvailability), 1),\n        _createElementVNode(\"p\", null, \"En Passant Target Square: \" + _toDisplayString(_ctx.engine.fen.enPassantTargetSquare), 1),\n        _createElementVNode(\"p\", null, \"Half Move Clock: \" + _toDisplayString(_ctx.engine.fen.halfMoveClock), 1),\n        _createElementVNode(\"p\", null, \"Full Move Number: \" + _toDisplayString(_ctx.engine.fen.fullMoveNumber), 1),\n        _createElementVNode(\"p\", null, \"Check Status: \" + _toDisplayString(_ctx.engine.checkStatus), 1),\n        _createElementVNode(\"p\", null, \"Check Mate Status: \" + _toDisplayString(_ctx.engine.checkMateStatus), 1),\n        _createElementVNode(\"p\", null, \"Tie Status: \" + _toDisplayString(_ctx.engine.tie), 1),\n        _createElementVNode(\"p\", null, \"Selected Piece: \" + _toDisplayString(_ctx.selectedPiece), 1),\n        _createElementVNode(\"p\", null, \"Legal Moves: \" + _toDisplayString(_ctx.legalMoves), 1)\n      ]),\n      (_ctx.engine.checkMateStatus)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n            _createElementVNode(\"h2\", null, \"Winner: \" + _toDisplayString(_ctx.engine.checkStatus === 'light' ? 'dark' : 'light'), 1),\n            _createElementVNode(\"button\", {\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.restart && _ctx.restart(...args)))\n            }, \"Restart?\")\n          ]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.engine.tie)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n            _hoisted_7,\n            _createElementVNode(\"button\", {\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.restart && _ctx.restart(...args)))\n            }, \"Restart?\")\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"div\", {\n      class: \"float-end\",\n      style: _normalizeStyle(`width: ${_ctx.containerWidth}px; height: ${_ctx.containerHeight}px`)\n    }, [\n      (_ctx.isMounted)\n        ? (_openBlock(), _createBlock(_component_canvas_board, {\n            key: 0,\n            \"container-height\": _ctx.containerHeight,\n            \"container-width\": _ctx.containerWidth,\n            \"current-board-representation\": _ctx.fenString,\n            \"legal-moves-for-selection\": _ctx.legalMoves,\n            onSelected: _ctx.calculateLegalMoves,\n            onDeselected: _ctx.clearLegalMoves,\n            onMove: _ctx.makeMove\n          }, null, 8, [\"container-height\", \"container-width\", \"current-board-representation\", \"legal-moves-for-selection\", \"onSelected\", \"onDeselected\", \"onMove\"]))\n        : _createCommentVNode(\"\", true)\n    ], 4)\n  ]))\n}","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"board\",\n  ref: \"board\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, null, 512))\n}","export interface FEN {\n    piecePlacement: string,\n    activeColor: string,\n    castlingAvailability: string,\n    enPassantTargetSquare: string,\n    halfMoveClock: number,\n    fullMoveNumber: number,\n}\n\nexport function separateFEN(fen: string): FEN {\n    const [\n        piecePlacement,\n        activeColor,\n        castlingAvailability,\n        enPassantTargetSquare,\n        halfMoveClock,\n        fullMoveNumber,\n    ] = fen.split(' ');\n    return {\n        piecePlacement,\n        activeColor,\n        castlingAvailability,\n        enPassantTargetSquare,\n        halfMoveClock: Number(halfMoveClock),\n        fullMoveNumber: Number(fullMoveNumber),\n    };\n}\n\nexport function stringifyFEN(fen: FEN): string {\n    return `${fen.piecePlacement} ${fen.activeColor} ${fen.castlingAvailability} ${fen.enPassantTargetSquare} ${fen.halfMoveClock} ${fen.fullMoveNumber}`;\n}\n\nexport function convertRowToArray(row: string): string[] {\n    const positions = row.split('');\n    for (let i = 0; i < positions.length; i++) {\n        const char = positions[i].charCodeAt(0);\n        if (char > 48 && char < 58) {\n            const number = char - 48;\n            const fillArray = Array(number).fill('x');\n            positions.splice(i, 1, ...fillArray);\n        }\n    }\n    return positions;\n}\n\nexport interface BoardMap {\n    [index: string]: string,\n}\n\nexport function parsePlacementToMap(piecePlacement: string): BoardMap {\n    const map: BoardMap = {};\n    const rows = piecePlacement.split('/');\n    let rank = 8;\n    for (const row of rows) {\n        const positions = convertRowToArray(row);\n        for (let i = 0; i < positions.length; i++) {\n            const f = file[i];\n            map[`${f}-${rank}`] = positions[i];\n        }\n        rank -= 1;\n    }\n    return map;\n}\n\nexport function filterAndSortPositionsToArray(positions: string[], rank: string): string[] {\n    return positions.filter(position => position.includes(rank)).sort((a, b) => a[0].charCodeAt(0) - b[0].charCodeAt(0));\n}\n\nexport function splitBoardMapToArray(boardMap: BoardMap): string[][] {\n    const positions = Object.keys(boardMap);\n    return [\n        filterAndSortPositionsToArray(positions, '8'),\n        filterAndSortPositionsToArray(positions, '7'),\n        filterAndSortPositionsToArray(positions, '6'),\n        filterAndSortPositionsToArray(positions, '5'),\n        filterAndSortPositionsToArray(positions, '4'),\n        filterAndSortPositionsToArray(positions, '3'),\n        filterAndSortPositionsToArray(positions, '2'),\n        filterAndSortPositionsToArray(positions, '1'),\n    ];\n}\n\nexport function rebuildPlacementFromMap(boardMap: BoardMap): string {\n    let piecePlacement = '';\n    const positions = splitBoardMapToArray(boardMap);\n    for (let r = 0; r < positions.length; r++) {\n        const rank = positions[r];\n        let localAccumulator = 0;\n        for (let i = 0; i < rank.length; i++) {\n            const piece = boardMap[rank[i]];\n            if (piece === 'x') {\n                localAccumulator += 1;\n            }\n            else if (localAccumulator > 0) {\n                piecePlacement = `${piecePlacement}${localAccumulator}${piece}`;\n                localAccumulator = 0;\n            }\n            else {\n                piecePlacement = `${piecePlacement}${piece}`;\n            }\n        }\n        if (localAccumulator > 0) {\n            piecePlacement = `${piecePlacement}${localAccumulator}`;\n        }\n        if (r < positions.length - 1) {\n            piecePlacement = `${piecePlacement}/`;\n        }\n    }\n    return piecePlacement;\n}\n\nexport function shiftChar(char: string, by: number) {\n    return String.fromCharCode(char.charCodeAt(0) + by);\n}\n\nexport const rank = [8, 7, 6, 5, 4, 3, 2, 1];\nexport const file = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\nexport const pieceCodes = [66, 75, 78, 80, 81, 82, 98, 107, 110, 112, 113, 114];\nexport const rankAndFile = [\n    'a-1', 'a-2', 'a-3', 'a-4', 'a-5', 'a-6', 'a-7', 'a-8',\n    'b-1', 'b-2', 'b-3', 'b-4', 'b-5', 'b-6', 'b-7', 'b-8',\n    'c-1', 'c-2', 'c-3', 'c-4', 'c-5', 'c-6', 'c-7', 'c-8',\n    'd-1', 'd-2', 'd-3', 'd-4', 'd-5', 'd-6', 'd-7', 'd-8',\n    'e-1', 'e-2', 'e-3', 'e-4', 'e-5', 'e-6', 'e-7', 'e-8',\n    'f-1', 'f-2', 'f-3', 'f-4', 'f-5', 'f-6', 'f-7', 'f-8',\n    'g-1', 'g-2', 'g-3', 'g-4', 'g-5', 'g-6', 'g-7', 'g-8',\n    'h-1', 'h-2', 'h-3', 'h-4', 'h-5', 'h-6', 'h-7', 'h-8',\n];\n","import * as PIXI from 'pixi.js';\n\ninterface GlobalOffset {\n    x: number,\n    y: number,\n}\n\ntype PointerCollision = PIXI.Sprite | null;\n\nfunction calculateCollision(x: number, y: number, node: PIXI.Container, globalOffset: GlobalOffset): boolean {\n    const bX1 = node.x + globalOffset.x;\n    const bY1 = node.y + globalOffset.y;\n    const bX2 = bX1 + node.width;\n    const bY2 = bY1 + node.height;\n    return x < bX2 && x > bX1 && y < bY2 && y > bY1;\n}\n\nexport function getPointerCollision(px: number, py: number, legalSpaces: PIXI.Sprite[], globalOffset: GlobalOffset, lastCollision: null | PIXI.Sprite = null): PointerCollision {\n    if (lastCollision) {\n        if (calculateCollision(px, py, lastCollision.parent, globalOffset)) {\n            return lastCollision;\n        }\n    }\n    const filtered = legalSpaces.filter(l => Math.abs(l.parent.x + globalOffset.x - px) < l.parent.width);\n    for (const place of filtered) {\n        if (calculateCollision(px, py, place.parent, globalOffset)) {\n            return place;\n        }\n    }\n    return null;\n}\n\nexport function isColliding(dragNode: PIXI.Sprite, legalSpaces: PIXI.Sprite[], globalOffset: { x: number, y: number }): PIXI.Sprite[] {\n    const collisions = [];\n    const aX = dragNode.x - (dragNode.width);\n    const aY = dragNode.y - (dragNode.height);\n    const aX2 = aX + dragNode.width;\n    const aY2 = aY + dragNode.height;\n    for (const place of legalSpaces) {\n        // Use parent node because \"place\" inherits position from parent\n        const parent = place.parent;\n        const bX1 = parent.x - (parent.width / 2) + globalOffset.x;\n        const bY1 = parent.y - (parent.height / 2) + globalOffset.y;\n        const bX2 = bX1 + parent.width;\n        const bY2 = bY1 + parent.height;\n        if (aX < bX2 && aX2 > bX1 && aY < bY2 && aY2 > bY1) {\n            collisions.push(place);\n        }\n    }\n    return collisions;\n}\n\nexport function getNearestCollision(collisions: PIXI.Sprite[], cX: number, cY: number, globalOffset: { x: number, y: number }): PIXI.Sprite {\n    collisions.sort((a, b) => {\n        const aCenter = {\n            x: a.parent.x + globalOffset.x + (a.parent.width / 2),\n            y: a.parent.y + globalOffset.y + (a.parent.height / 2),\n        };\n        const bCenter = {\n            x: b.parent.x + globalOffset.x + (b.parent.width / 2),\n            y: b.parent.y + globalOffset.y + (b.parent.height / 2),\n        };\n        const aDelta = {\n            x: Math.abs(cX - aCenter.x),\n            y: Math.abs(cY - aCenter.y),\n        };\n        const aHypotenuse = Math.hypot(aDelta.x, aDelta.y);\n        const bDelta = {\n            x: Math.abs(cX - bCenter.x),\n            y: Math.abs(cY - bCenter.y),\n        };\n        const bHypotenuse = Math.hypot(bDelta.x, bDelta.y);\n        return aHypotenuse - bHypotenuse;\n    });\n    return collisions[0];\n}\n","\nimport { defineComponent, PropType } from 'vue';\nimport * as PIXI from 'pixi.js';\nimport { separateFEN, parsePlacementToMap, rank, file } from '@/utils/utils';\nimport { ICanvasBoard, BoardConfig, LegalMovesForSelection } from '@/board/BoardUtils';\nimport { getPointerCollision } from '@/board/Collision';\n\nexport default defineComponent({\n    name: 'CanvasBoard',\n    emits: ['selected', 'deselected', 'move'],\n    props: {\n        currentBoardRepresentation: {\n            type: String,\n            default: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1',\n        },\n        containerHeight: {\n            type: Number,\n            default: 100,\n        },\n        containerWidth: {\n            type: Number,\n            default: 100,\n        },\n        boardConfig: {\n            type: Object as PropType<BoardConfig>,\n        },\n        legalMovesForSelection: {\n            type: Array as PropType<LegalMovesForSelection>,\n            default: () => [],\n        },\n    },\n    data(): ICanvasBoard {\n        return {\n            app: new PIXI.Application(),\n            containerLength: 0,\n            squareLength: 0,\n            boardContainer: new PIXI.Container(),\n            pieces: {},\n            textures: {},\n            svgs: {},\n            squareMap: {},\n            boardMap: {},\n            fen: {\n                piecePlacement: '',\n                activeColor: '',\n                castlingAvailability: '',\n                enPassantTargetSquare: '',\n                halfMoveClock: 0,\n                fullMoveNumber: 0,\n            },\n            dark: 0xb58863,\n            light: 0xf0d9b5,\n            drag: {\n                dragData: null,\n                dragNode: null,\n                tempContainer: new PIXI.Container(),\n                originalParent: null,\n            },\n            highlight: {\n                originalPlace: null,\n                closestTarget: null,\n                legalTargets: [],\n            },\n            placedPieces: [],\n            freeSpaces: [],\n            globalOffset: {\n                x: 0,\n                y: 0,\n            },\n            cachedCollision: null,\n        };\n    },\n    watch: {\n        currentBoardRepresentation() {\n            this.updateFEN(this.currentBoardRepresentation);\n        },\n        legalMovesForSelection: {\n            deep: true,\n            handler() {\n                this.highlightLegalMoves();\n            },\n        },\n    },\n    mounted() {\n        this.applyConfig();\n        // @ts-ignore TS2322\n        const element: HTMLDivElement = this.$refs.board;\n        element.style.width = this.containerWidth + 'px';\n        element.style.height = this.containerHeight + 'px';\n        this.app = new PIXI.Application({\n            antialias: true,\n            resolution: window.devicePixelRatio,\n            backgroundAlpha: 0,\n            resizeTo: element,\n        });\n        this.calculateContainerLength();\n        this.calculateSquareLength();\n        this.loadSVGs();\n        this.loadTextures();\n        const container = new PIXI.Container();\n        container.interactive = true;\n        container.on('pointermove', this.onDragMove);\n        this.app.stage.addChild(container);\n        this.boardContainer = container;\n        element.appendChild(this.app.view);\n        this.drawBoard();\n        this.updateFEN(this.currentBoardRepresentation);\n        // @ts-ignore TS2345\n        this.app.stage.addChild(this.drag.tempContainer);\n        container.x = this.app.screen.width / 2;\n        container.y = this.app.screen.height / 2;\n        container.pivot.x = container.width / 2.28;\n        container.pivot.y = container.height / 2.28;\n        this.calculateGlobalOffset();\n    },\n    beforeUnmount() {\n        this.app.destroy();\n    },\n    methods: {\n        calculateGlobalOffset(): void {\n            this.globalOffset.x = this.boardContainer.x - (this.boardContainer.width / 2);\n            this.globalOffset.y = this.boardContainer.y - (this.boardContainer.height / 2);\n        },\n        applyConfig(): void {\n            if (this.boardConfig) {\n                if (this.boardConfig.light) {\n                    this.light = this.boardConfig.light;\n                }\n                if (this.boardConfig.dark) {\n                    this.dark = this.boardConfig.dark;\n                }\n            }\n        },\n        drawBoard(): void {\n            for (let y = 0; y < rank.length; y++) {\n                for (let x = 0; x < file.length; x++) {\n                    const id = `${file[x]}-${rank[y]}`;\n                    const startX = x * this.squareLength;\n                    const startY = y * this.squareLength;\n                    const color = this.getColorForSquare(file[x], rank[y]);\n                    this.squareMap[id] = this.drawSquare(startX, startY, color);\n                    this.squareMap[id].name = id;\n                }\n            }\n        },\n        getColorForSquare(rank: string, row: number): number {\n            const charCode = rank.charCodeAt(0);\n            if (charCode % 2 !== 0) {\n                return row % 2 === 0 ? this.light : this.dark;\n            }\n            return row % 2 === 0 ? this.dark : this.light;\n        },\n        loadSVGs(): void {\n            this.svgs.B = new PIXI.SVGResource(require('../assets/pieces/66.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.K = new PIXI.SVGResource(require('../assets/pieces/75.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.N = new PIXI.SVGResource(require('../assets/pieces/78.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.P = new PIXI.SVGResource(require('../assets/pieces/80.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.Q = new PIXI.SVGResource(require('../assets/pieces/81.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.R = new PIXI.SVGResource(require('../assets/pieces/82.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.b = new PIXI.SVGResource(require('../assets/pieces/98.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.k = new PIXI.SVGResource(require('../assets/pieces/107.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.n = new PIXI.SVGResource(require('../assets/pieces/110.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.p = new PIXI.SVGResource(require('../assets/pieces/112.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.q = new PIXI.SVGResource(require('../assets/pieces/113.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.r = new PIXI.SVGResource(require('../assets/pieces/114.svg'), { width: this.squareLength, height: this.squareLength });\n        },\n        loadTextures(): void {\n            // @ts-ignore TS2345\n            this.textures.B = PIXI.Texture.from(this.svgs.B);\n            // @ts-ignore TS2345\n            this.textures.K = PIXI.Texture.from(this.svgs.K);\n            // @ts-ignore TS2345\n            this.textures.N = PIXI.Texture.from(this.svgs.N);\n            // @ts-ignore TS2345\n            this.textures.P = PIXI.Texture.from(this.svgs.P);\n            // @ts-ignore TS2345\n            this.textures.Q = PIXI.Texture.from(this.svgs.Q);\n            // @ts-ignore TS2345\n            this.textures.R = PIXI.Texture.from(this.svgs.R);\n            // @ts-ignore TS2345\n            this.textures.b = PIXI.Texture.from(this.svgs.b);\n            // @ts-ignore TS2345\n            this.textures.k = PIXI.Texture.from(this.svgs.k);\n            // @ts-ignore TS2345\n            this.textures.n = PIXI.Texture.from(this.svgs.n);\n            // @ts-ignore TS2345\n            this.textures.p = PIXI.Texture.from(this.svgs.p);\n            // @ts-ignore TS2345\n            this.textures.q = PIXI.Texture.from(this.svgs.q);\n            // @ts-ignore TS2345\n            this.textures.r = PIXI.Texture.from(this.svgs.r);\n        },\n        updateFEN(fen: string): void {\n            this.fen = separateFEN(fen);\n            this.boardMap = parsePlacementToMap(this.fen.piecePlacement);\n            this.clearPieces();\n            this.placePieces();\n        },\n        findFreeSpaces(): void {\n            const boardArray = Object.keys(this.boardMap);\n            const filtered = [];\n            for (const place of boardArray) {\n                if (this.boardMap[place] === 'x') {\n                    filtered.push(this.squareMap[place]);\n                }\n            }\n            this.freeSpaces = filtered;\n        },\n        isPieceInteractive(piece: string): boolean {\n            return (this.fen.activeColor === 'w' && piece.charCodeAt(0) < 97) ||\n                (this.fen.activeColor === 'b' && piece.charCodeAt(0) > 97);\n        },\n        clearPieces(): void {\n            for (let i = this.placedPieces.length - 1; i >= 0; i--) {\n                const piece = this.placedPieces.pop();\n                if (piece) {\n                    piece.destroy();\n                }\n            }\n        },\n        placePieces(): void {\n            for (const place of Object.keys(this.boardMap)) {\n                const piece = this.boardMap[place];\n                if (piece !== 'x') {\n                    const texture = this.textures[piece];\n                    // @ts-ignore: TS2345\n                    const sprite = new PIXI.Sprite(texture);\n                    if (this.isPieceInteractive(piece)) {\n                        sprite.interactive = true;\n                        sprite.buttonMode = true;\n                        sprite.on('pointerdown', this.onDragStart)\n                            .on('pointerup', this.onDragEnd)\n                            .on('pointerupoutside', this.onDragEnd);\n                    }\n                    sprite.anchor.set(0.5);\n                    sprite.name = piece;\n                    const boardSquare = this.squareMap[place];\n                    boardSquare.addChild(sprite);\n                    this.placedPieces.push(sprite);\n                }\n                else {\n                    const sprite = new PIXI.Sprite();\n                    sprite.interactive = true;\n                    sprite.anchor.set(0.5);\n                    sprite.width = this.squareLength;\n                    sprite.height = this.squareLength;\n                    sprite.alpha = 0;\n                    const boardSquare = this.squareMap[place];\n                    boardSquare.addChild(sprite);\n                    this.placedPieces.push(sprite);\n                }\n            }\n        },\n        drawSquare(x: number, y: number, color: number): PIXI.Container {\n            const squareContainer = new PIXI.Container();\n            squareContainer.position.set(x, y);\n            if (this.app) {\n                const square = new PIXI.Graphics();\n                square.beginFill(color);\n                square.drawRect(0, 0, this.squareLength, this.squareLength);\n                square.endFill();\n                square.pivot.x = square.width / 2;\n                square.pivot.y = square.height / 2;\n                squareContainer.addChild(square);\n                this.boardContainer.addChild(squareContainer);\n            }\n            return squareContainer;\n        },\n        onDragStart(event: PIXI.InteractionEvent): void {\n            this.drag.dragData = event.data;\n            // @ts-ignore TS2740\n            this.drag.dragNode = event.currentTarget;\n            // @ts-ignore TS2322\n            this.drag.originalParent = this.drag.dragNode?.parent;\n            this.highlight.originalPlace = this.createHighlight(0xffffff);\n            // @ts-ignore TS2339\n            this.drag.originalParent.addChild(this.highlight.originalPlace);\n            const selected = event.currentTarget;\n            const piece = selected.name;\n            const place = selected.parent.name;\n            this.$emit('selected', { piece, place });\n            // @ts-ignore TS2531\n            this.drag.dragNode.alpha = 0.5;\n            // @ts-ignore TS2345\n            this.drag.dragNode.setParent(this.drag.tempContainer);\n            this.onDragMove();\n        },\n        createHighlight(color: number): PIXI.Graphics {\n            const highlight = new PIXI.Graphics();\n            highlight.beginFill(color);\n            highlight.drawRect(0, 0, this.squareLength, this.squareLength);\n            highlight.endFill();\n            highlight.pivot.x = highlight.width / 2;\n            highlight.pivot.y = highlight.height / 2;\n            highlight.beginHole();\n            highlight.drawRect(this.squareLength / 20, this.squareLength / 20, this.squareLength - (this.squareLength / 10), this.squareLength - (this.squareLength / 10));\n            highlight.endHole();\n            return highlight;\n        },\n        onDragEnd(): void {\n            if (this.drag.dragNode) {\n                this.drag.dragNode.alpha = 1;\n                if (this.highlight.closestTarget) {\n                    const movePayload = {\n                        to: this.highlight.closestTarget.parent.name,\n                        from: this.highlight.originalPlace?.parent.name,\n                        piece: this.drag.dragNode.name,\n                    };\n                    this.$emit('move', movePayload);\n                    console.log(movePayload);\n                }\n                // @ts-ignore TS2345\n                this.drag.dragNode.setParent(this.drag.originalParent);\n                this.drag.dragNode.x = 0;\n                this.drag.dragNode.y = 0;\n            }\n            if (this.highlight.originalPlace) {\n                this.highlight.originalPlace.destroy();\n            }\n            if (this.highlight.closestTarget) {\n                this.highlight.closestTarget.destroy();\n            }\n            this.clearDrag();\n            this.clearHighlight();\n            this.$emit('deselected', true);\n        },\n        onDragMove(): void {\n            if (this.drag.dragNode) {\n                // @ts-ignore TS2345\n                const newPosition = this.drag.dragData.getLocalPosition(this.drag.dragNode.parent);\n                if (newPosition.x > this.containerWidth) {\n                    this.drag.dragNode.x = this.containerWidth;\n                }\n                else if (newPosition.x < 0) {\n                    this.drag.dragNode.x = 0;\n                }\n                else {\n                    this.drag.dragNode.x = newPosition.x;\n                }\n                if (newPosition.y > this.containerHeight) {\n                    this.drag.dragNode.y = this.containerHeight;\n                }\n                else if (newPosition.y < 0) {\n                    this.drag.dragNode.y = 0;\n                }\n                else {\n                    this.drag.dragNode.y = newPosition.y;\n                }\n                this.clearCollision();\n                // Check which position mouse is closest to\n                // @ts-ignore TS2345\n                const collision = getPointerCollision(newPosition.x, newPosition.y, this.highlight.legalTargets, this.globalOffset);\n                this.cachedCollision = collision;\n                if (collision) {\n                    const highlight = this.createHighlight(0x0000ff);\n                    // @ts-ignore TS2345\n                    collision.parent.addChild(highlight);\n                    // @ts-ignore TS2740\n                    this.highlight.closestTarget = highlight;\n                }\n            }\n        },\n        clearDrag(): void {\n            this.drag.dragNode = null;\n            this.drag.dragData = null;\n            this.drag.originalParent = null;\n        },\n        clearHighlight(): void {\n            this.highlight.originalPlace = null;\n            this.highlight.closestTarget = null;\n            this.clearLegalMoves();\n            this.clearCollision();\n        },\n        highlightLegalMoves(): void {\n            for (const move of this.legalMovesForSelection) {\n                const square = this.squareMap[move];\n                const highlight = this.createHighlight(0x00ff00);\n                square.addChild(highlight);\n                this.highlight.legalTargets.push(highlight);\n            }\n        },\n        clearLegalMoves(): void {\n            for (let i = this.highlight.legalTargets.length - 1; i >= 0; i--) {\n                const node = this.highlight.legalTargets[i];\n                node.destroy();\n                this.highlight.legalTargets.pop();\n            }\n        },\n        clearCollision(): void {\n            if (this.highlight.closestTarget) {\n                this.highlight.closestTarget.destroy();\n                this.highlight.closestTarget = null;\n            }\n        },\n        calculateContainerLength(): void {\n            this.containerLength = this.parentWidth() > this.parentHeight() ? this.parentHeight() : this.parentWidth();\n        },\n        parentWidth(): number {\n            return this.app ? this.app.view.width : 0;\n        },\n        parentHeight(): number {\n            return this.app ? this.app.view.height : 0;\n        },\n        calculateSquareLength(): void {\n            this.squareLength = this.containerLength / rank.length;\n        },\n    },\n});\n","import { render } from \"./CanvasBoard.vue?vue&type=template&id=f182caec&ts=true\"\nimport script from \"./CanvasBoard.vue?vue&type=script&lang=ts\"\nexport * from \"./CanvasBoard.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { BoardMap, FEN, shiftChar } from '../../utils/utils';\n\nexport type Color = 'light' | 'dark';\n\nexport type MoveType = 'consecutive' | 'jump';\n\nexport interface DefendPiece {\n    code: string,\n    position: string,\n}\n\nexport abstract class Piece {\n    name: string;\n    code: string;\n    color: Color;\n    position: string;\n    lastPosition: string | null;\n    rank: number;\n    file: string;\n    legalMoves: string[] | null = null;\n    moveType: MoveType;\n    defending: DefendPiece[] = [];\n\n    protected constructor(color: Color, position: string, name: string, moveType: MoveType) {\n        this.color = color;\n        this.position = position;\n        this.lastPosition = null;\n        this.name = name;\n        this.code = this.parseCode();\n        const [file, rank] = position.split('-');\n        this.rank = Number(rank);\n        this.file = file;\n        this.moveType = moveType;\n    }\n\n    public move(position: string): void {\n        this.lastPosition = this.position;\n        this.position = position;\n        const [file, rank] = position.split('-');\n        this.rank = Number(rank);\n        this.file = file;\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        return [];\n    }\n\n    // Filters valid moves based on if the space exists and if the piece is either x or an enemy piece\n    protected filterValidMoves(moves: string[], currentBoard: BoardMap): string[] {\n        return moves.filter(move => this.isValidMovePosition(move, currentBoard));\n    }\n\n    protected isValidMovePosition(move: string, currentBoard: BoardMap): boolean {\n        const lowerRangeEnemyCodes = this.color === 'dark' ? 65 : 97;\n        const upperRangeEnemyCodes = this.color === 'dark' ? 90 : 122;\n        const lowerRangeAllyCodes = this.color === 'dark' ? 97 : 65;\n        const upperRangeAllyCodes = this.color === 'dark' ? 122 : 90;\n        if (currentBoard[move]) {\n            const moveCharCode = currentBoard[move].charCodeAt(0);\n            if (currentBoard[move] === 'x') {\n                return true;\n            }\n            else if (moveCharCode >= lowerRangeAllyCodes && moveCharCode <= upperRangeAllyCodes) {\n                this.defending.push({ code: currentBoard[move], position: move });\n            }\n            return !!currentBoard[move] && currentBoard[move].charCodeAt(0) >= lowerRangeEnemyCodes && currentBoard[move].charCodeAt(0) <= upperRangeEnemyCodes;\n        }\n        return false;\n    }\n\n    protected isMoveCapture(move: string, currentBoard: BoardMap): boolean {\n        const lowerRangeEnemyCodes = this.color === 'dark' ? 65 : 97;\n        const upperRangeEnemyCodes = this.color === 'dark' ? 90 : 122;\n        if (currentBoard[move] === 'x') {\n            return false;\n        }\n        return !!currentBoard[move] && currentBoard[move].charCodeAt(0) >= lowerRangeEnemyCodes && currentBoard[move].charCodeAt(0) <= upperRangeEnemyCodes;\n    }\n\n    protected isOppositeColor(pieceCode: string): boolean {\n        const charCode = pieceCode.charCodeAt(0);\n        if (this.color === 'dark') {\n            return charCode <= 90;\n        }\n        return charCode >= 97;\n    }\n\n    protected consecutiveMoveSearch(currentBoard: BoardMap, straight: boolean, diagonal: boolean): string[] {\n        const moveArray: string[] = [];\n        let lookUpLeft = false;\n        let lookUp = false;\n        let lookUpRight = false;\n        let lookDownRight = false;\n        let lookDown = false;\n        let lookDownLeft = false;\n        let lookLeft = false;\n        let lookRight = false;\n        if (straight) {\n            lookUp = true;\n            lookDown = true;\n            lookLeft = true;\n            lookRight = true;\n        }\n        if (diagonal) {\n            lookUpLeft = true;\n            lookUpRight = true;\n            lookDownRight = true;\n            lookDownLeft = true;\n        }\n        // Look up\n        for (let i = this.rank + 1; i <= 8; i++) {\n            if (!lookUpLeft && !lookUpRight && !lookUp) {\n                break;\n            }\n            if (lookUp) {\n                const newPosition = `${this.file}-${i}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        lookUp = false;\n                    }\n                }\n                else {\n                    lookUp = false;\n                }\n            }\n            if (lookUpRight) {\n                const move = `${shiftChar(this.file, i - this.rank)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookUpRight = false;\n                    }\n                }\n                else {\n                    lookUpRight = false;\n                }\n            }\n            if (lookUpLeft) {\n                const move = `${shiftChar(this.file, (i - this.rank) * -1)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookUpLeft = false;\n                    }\n                }\n                else {\n                    lookUpLeft = false;\n                }\n            }\n        }\n        // Look down\n        for (let i = this.rank - 1; i >= 1; i--) {\n            if (!lookDownLeft && !lookDownRight && !lookDown) {\n                break;\n            }\n            if (lookDown) {\n                const newPosition = `${this.file}-${i}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        lookDown = false;\n                    }\n                }\n                else {\n                    lookDown = false;\n                }\n            }\n            if (lookDownRight) {\n                const move = `${shiftChar(this.file, i - this.rank)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookDownRight = false;\n                    }\n                }\n                else {\n                    lookDownRight = false;\n                }\n            }\n            if (lookDownLeft) {\n                const move = `${shiftChar(this.file, (i - this.rank) * -1)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookDownLeft = false;\n                    }\n                }\n                else {\n                    lookDownLeft = false;\n                }\n            }\n        }\n        const fileNumber = this.file.charCodeAt(0);\n        const fileLowerBound = 97;\n        const fileUpperBound = 104;\n        if (lookLeft) {\n            for (let i = fileNumber - 1; i >= fileLowerBound; i--) {\n                const newPosition = `${String.fromCharCode(i)}-${this.rank}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        break;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        if (lookRight) {\n            for (let i = fileNumber + 1; i <= fileUpperBound; i++) {\n                const newPosition = `${String.fromCharCode(i)}-${this.rank}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        break;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return moveArray;\n    }\n\n    public resetLegalMoves(): void {\n        this.legalMoves = null;\n        this.defending.length = 0;\n    }\n\n    private parseCode(): string {\n        if (this.name === 'Knight') {\n            return this.color === 'dark' ? this.name[1].toLowerCase() : this.name[1].toUpperCase();\n        }\n        return this.color === 'dark' ? this.name[0].toLowerCase() : this.name[0].toUpperCase();\n    }\n}\n","import { BoardMap, FEN, shiftChar } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Pawn extends Piece {\n    inStartingPosition: boolean;\n    direction: number;\n\n    constructor(color: Color, position: string) {\n        super(color, position, 'Pawn', 'consecutive');\n        this.direction = this.color === 'dark' ? -1 : 1;\n        this.inStartingPosition = (this.rank === 7 && this.color === 'dark') || (this.rank === 2 && this.color === 'light');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            const moves = [];\n            const newRank = this.rank + this.direction;\n            const move1 = `${this.file}-${newRank}`;\n            if ((newRank <= 8 || newRank >= 1) && currentBoard[move1] === 'x') {\n                moves.push(move1);\n                if (this.inStartingPosition) {\n                    const move2 = `${this.file}-${this.rank + (2 * this.direction)}`;\n                    if (currentBoard[move2] === 'x') {\n                        moves.push(move2);\n                    }\n                }\n            }\n            const leftFile = shiftChar(this.file, -1);\n            const rightFile = shiftChar(this.file, 1);\n            const possibleEPSquares = [`${leftFile}-${newRank}`, `${rightFile}-${newRank}`];\n            for (const possibleSquare of possibleEPSquares) {\n                const enPassantCheck = possibleSquare[0] + possibleSquare[2];\n                if (enPassantCheck === fen.enPassantTargetSquare || (currentBoard[possibleSquare] && currentBoard[possibleSquare] !== 'x' && this.isOppositeColor(currentBoard[possibleSquare]))) {\n                    moves.push(`${possibleSquare}`);\n                }\n            }\n            this.legalMoves = moves;\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN, shiftChar } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Knight extends Piece {\n    constructor(color: Color, position: string) {\n        super(color, position, 'Knight', 'jump');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = [];\n            // rank + 2\n            this.legalMoves.push(`${shiftChar(this.file, 1)}-${this.rank + 2}`);\n            this.legalMoves.push(`${shiftChar(this.file, -1)}-${this.rank + 2}`);\n            // rank + 1\n            this.legalMoves.push(`${shiftChar(this.file, 2)}-${this.rank + 1}`);\n            this.legalMoves.push(`${shiftChar(this.file, -2)}-${this.rank + 1}`);\n            // rank - 1\n            this.legalMoves.push(`${shiftChar(this.file, 2)}-${this.rank - 1}`);\n            this.legalMoves.push(`${shiftChar(this.file, -2)}-${this.rank - 1}`);\n            // rank - 2\n            this.legalMoves.push(`${shiftChar(this.file, 1)}-${this.rank - 2}`);\n            this.legalMoves.push(`${shiftChar(this.file, -1)}-${this.rank - 2}`);\n            this.legalMoves = this.filterValidMoves(this.legalMoves, currentBoard);\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN, shiftChar, rankAndFile } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\ninterface CheckStatus {\n    check: boolean,\n    piece: string | null,\n}\n\nexport default class King extends Piece {\n    canCastleShort: boolean;\n    canCastleLong: boolean;\n    isInCheck = false;\n    checkBy: string | null = null;\n\n    constructor(color: Color, position: string, castlingAvailability: string) {\n        super(color, position, 'King', 'consecutive');\n        this.canCastleShort = (castlingAvailability.includes('K') && color === 'light') ||\n            (castlingAvailability.includes('k') && color === 'dark');\n        this.canCastleLong = (castlingAvailability.includes('Q') && color === 'light') ||\n            (castlingAvailability.includes('q') && color === 'dark');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = [];\n            let moves = [];\n            // Up\n            moves.push(`${shiftChar(this.file, -1)}-${this.rank + 1}`);\n            moves.push(`${this.file}-${this.rank + 1}`);\n            moves.push(`${shiftChar(this.file, 1)}-${this.rank + 1}`);\n            // Down\n            moves.push(`${shiftChar(this.file, -1)}-${this.rank - 1}`);\n            moves.push(`${this.file}-${this.rank - 1}`);\n            moves.push(`${shiftChar(this.file, 1)}-${this.rank - 1}`);\n            // Left\n            moves.push(`${shiftChar(this.file, -1)}-${this.rank}`);\n            // Right\n            moves.push(`${shiftChar(this.file, 1)}-${this.rank}`);\n            moves = this.filterValidMoves(moves, currentBoard);\n            for (const move of moves) {\n                if (this.checkCastlingForAttackers([move], currentBoard) === 1) {\n                    this.legalMoves.push(move);\n                }\n            }\n            if (this.canCastleShort && this.canPerformCastleShort(currentBoard)) {\n                const checkPositions = [`${shiftChar(this.file, 1)}-${this.rank}`, `${shiftChar(this.file, 2)}-${this.rank}`];\n                const good = this.checkCastlingForAttackers(checkPositions, currentBoard);\n                if (good === 2) {\n                    const castleShortPosition = this.color === 'light' ? 'g-1' : 'g-8';\n                    this.legalMoves.push(castleShortPosition);\n                }\n            }\n            if (this.canCastleLong && this.canPerformCastleLong(currentBoard)) {\n                const checkPositions = [`${shiftChar(this.file, -1)}-${this.rank}`, `${shiftChar(this.file, -2)}-${this.rank}`];\n                const good = this.checkCastlingForAttackers(checkPositions, currentBoard);\n                if (good === 2) {\n                    const castleLongPosition = this.color === 'light' ? 'c-1' : 'c-8';\n                    this.legalMoves.push(castleLongPosition);\n                }\n            }\n        }\n        return this.legalMoves;\n    }\n\n    public checkCastlingForAttackers(positions: string[], currentBoard: BoardMap): number {\n        const currentCheckStatus = this.checkBy;\n        const currentInCheck = this.isInCheck;\n        const currentPosition = this.position;\n        const currentRank = this.rank;\n        const currentFile = this.file;\n        let good = 0;\n        for (const pos of positions) {\n            const boardCopy = JSON.parse(JSON.stringify(currentBoard));\n            boardCopy[this.position] = 'x';\n            boardCopy[pos] = this.code;\n            this.position = pos;\n            this.rank = Number(pos[2]);\n            this.file = pos[0];\n            const checkStatus = this.getCheckStatus(boardCopy);\n            if (!checkStatus.check) {\n                good += 1;\n            }\n            this.checkBy = currentCheckStatus;\n            this.isInCheck = currentInCheck;\n        }\n        this.position = currentPosition;\n        this.rank = currentRank;\n        this.file = currentFile;\n        return good;\n    }\n\n    public canPerformCastleShort(currentBoard: BoardMap): boolean {\n        return currentBoard[`${shiftChar(this.file, 1)}-${this.rank}`] === 'x' && currentBoard[`${shiftChar(this.file, 2)}-${this.rank}`] === 'x';\n    }\n\n    public canPerformCastleLong(currentBoard: BoardMap): boolean {\n        return currentBoard[`${shiftChar(this.file, -1)}-${this.rank}`] === 'x' && currentBoard[`${shiftChar(this.file, -2)}-${this.rank}`] === 'x' && currentBoard[`${shiftChar(this.file, -3)}-${this.rank}`] === 'x';\n    }\n\n    public findAttackersFromPositions(positions: string[], boardMap: BoardMap, attackingPieceCode: string): boolean {\n        positions = positions.filter((position) => rankAndFile.includes(position));\n        const attackers = positions.filter((position) => boardMap[position] === attackingPieceCode);\n        // Theoretically there can only be one attacker at a time\n        if (attackers.length > 0) {\n            this.isInCheck = true;\n            this.checkBy = attackers[0];\n            return true;\n        }\n        return false;\n    }\n\n    public checkDirection(currentBoard: BoardMap, position: string, piece1: string, piece2: string): boolean {\n        if (rankAndFile.includes(position)) {\n            if (currentBoard[position] === 'x') {\n                return true;\n            }\n            else if (currentBoard[position] === piece1 || currentBoard[position] === piece2) {\n                this.isInCheck = true;\n                this.checkBy = position;\n                return false;\n            }\n        }\n        return false;\n    }\n\n    public getCheckStatus(currentBoard: BoardMap): CheckStatus {\n        this.isInCheck = false;\n        this.checkBy = null;\n        let direction: number;\n        let aKnight: string;\n        let aPawn: string;\n        let aQueen: string;\n        let aRook: string;\n        let aBishop: string;\n        if (this.color === 'light') {\n            direction = 1;\n            aKnight = 'n';\n            aPawn = 'p';\n            aQueen = 'q';\n            aRook = 'r';\n            aBishop = 'b';\n        }\n        else {\n            direction = -1;\n            aKnight = 'N';\n            aPawn = 'P';\n            aQueen = 'Q';\n            aRook = 'R';\n            aBishop = 'B';\n        }\n        // Check for attacking knights\n        const possibleKnightPositions = [\n            `${shiftChar(this.file, 1)}-${this.rank + 2}`,\n            `${shiftChar(this.file, -1)}-${this.rank + 2}`,\n            `${shiftChar(this.file, 2)}-${this.rank + 1}`,\n            `${shiftChar(this.file, -2)}-${this.rank + 1}`,\n            `${shiftChar(this.file, 2)}-${this.rank - 1}`,\n            `${shiftChar(this.file, -2)}-${this.rank - 1}`,\n            `${shiftChar(this.file, 1)}-${this.rank - 2}`,\n            `${shiftChar(this.file, -1)}-${this.rank - 2}`,\n        ];\n        // If no attacking knights\n        if (!this.findAttackersFromPositions(possibleKnightPositions, currentBoard, aKnight)) {\n            // Check for attacking pawn\n            const possiblePawnPositions = [\n                `${shiftChar(this.file, 1)}-${this.rank + direction}`,\n                `${shiftChar(this.file, -1)}-${this.rank + direction}`,\n            ];\n            // If no attacking pawns\n            if (!this.findAttackersFromPositions(possiblePawnPositions, currentBoard, aPawn)) {\n                let up = true;\n                let down = true;\n                let left = true;\n                let right = true;\n                let upLeft = true;\n                let upRight = true;\n                let downLeft = true;\n                let downRight = true;\n                for (let i = 1; i <= 8; i++) {\n                    if (up) {\n                        const newPosition = `${this.file}-${this.rank + i}`;\n                        up = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (down) {\n                        const newPosition = `${this.file}-${this.rank - i}`;\n                        down = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (left) {\n                        const newPosition = `${shiftChar(this.file, -i)}-${this.rank}`;\n                        left = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (right) {\n                        const newPosition = `${shiftChar(this.file, i)}-${this.rank}`;\n                        right = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (upLeft) {\n                        const newPosition = `${shiftChar(this.file, -i)}-${this.rank + i}`;\n                        upLeft = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if (upRight) {\n                        const newPosition = `${shiftChar(this.file, i)}-${this.rank + i}`;\n                        upRight = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if (downLeft) {\n                        const newPosition = `${shiftChar(this.file, -i)}-${this.rank - i}`;\n                        downLeft = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if (downRight) {\n                        const newPosition = `${shiftChar(this.file, i)}-${this.rank - i}`;\n                        downRight = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if ((!up && !down && !left && !right && !upLeft && !upRight && !downLeft && !downRight) || (this.isInCheck)) {\n                        break;\n                    }\n                }\n            }\n        }\n\n        return { check: this.isInCheck, piece: this.checkBy };\n    }\n}\n","import { BoardMap, FEN } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Queen extends Piece {\n    constructor(color: Color, position: string) {\n        super(color, position, 'Queen', 'consecutive');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = this.consecutiveMoveSearch(currentBoard, true, true);\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Bishop extends Piece {\n    constructor(color: Color, position: string) {\n        super(color, position, 'Bishop', 'consecutive');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = this.consecutiveMoveSearch(currentBoard, false, true);\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Rook extends Piece {\n    canCastle: boolean;\n    castleSide: string;\n\n    constructor(color: Color, position: string, castlingAvailability: string) {\n        super(color, position, 'Rook', 'consecutive');\n        if (castlingAvailability.includes('q') && position === 'a-8' && this.color === 'dark') {\n            this.canCastle = true;\n            this.castleSide = 'q';\n        }\n        else if (castlingAvailability.includes('k') && position === 'h-8' && this.color === 'dark') {\n            this.canCastle = true;\n            this.castleSide = 'k';\n        }\n        else if (castlingAvailability.includes('Q') && position === 'a-1' && this.color === 'light') {\n            this.canCastle = true;\n            this.castleSide = 'Q';\n        }\n        else if (castlingAvailability.includes('K') && position === 'h-1' && this.color === 'light') {\n            this.canCastle = true;\n            this.castleSide = 'K';\n        }\n        else {\n            this.canCastle = false;\n            this.castleSide = '-';\n        }\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = this.consecutiveMoveSearch(currentBoard, true, false);\n        }\n        return this.legalMoves;\n    }\n}\n","import Pawn from './pieces/Pawn';\nimport Knight from './pieces/Knight';\nimport King from './pieces/King';\nimport Queen from './pieces/Queen';\nimport Bishop from './pieces/Bishop';\nimport Rook from './pieces/Rook';\nimport { Color, Piece } from './pieces/Piece';\nimport { BoardMap, FEN, parsePlacementToMap, rebuildPlacementFromMap, separateFEN, shiftChar, stringifyFEN } from '../utils/utils';\n\n// PieceMap indexes based on position of Piece on board\ninterface PieceMap {\n    [index: string]: Piece,\n}\n\ninterface Kings {\n    k: King,\n    K: King,\n}\n\ninterface ParsedPieces {\n    piecesByLocation: PieceMap,\n    kings: Kings,\n}\n\ninterface PiecesByColor {\n    light: Piece[],\n    dark: Piece[],\n}\n\ntype CheckStatus = 'light' | 'dark' | 'none';\n\nexport class Chess {\n    fen: FEN;\n    boardMap: BoardMap;\n    piecesByLocation: PieceMap; // this tracks pieces by position\n    kings: Kings;\n    piecesByColor: PiecesByColor = { light: [], dark: [] };\n    checkStatus: CheckStatus = 'none';\n    checkMateStatus: boolean = false;\n    tie: boolean = false;\n\n    constructor(fen: string = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1') {\n        this.fen = separateFEN(fen);\n        this.boardMap = parsePlacementToMap(this.fen.piecePlacement);\n        const { piecesByLocation, kings } = this.parsePieces();\n        this.piecesByLocation = piecesByLocation;\n        this.kings = kings;\n        this.resetLegalMovesAndCheckStatus();\n        this.updateCheckMate();\n    }\n\n    private parsePieces(): ParsedPieces {\n        const piecesByLocation: PieceMap = {};\n        // For typescript consistency, pre-assign Kings so compiler doesn't get angry\n        let lightKing = new King('light', '', '');\n        let darkKing = new King('light', '', '');\n        for (const position of Object.keys(this.boardMap)) {\n            const piece = this.boardMap[position];\n            if (piece !== 'x') {\n                let pieceInstance;\n                // If char code of piece is lowercase, it is dark\n                const color = piece.charCodeAt(0) > 96 ? 'dark' : 'light';\n                if (piece === 'p' || piece === 'P') {\n                    pieceInstance = new Pawn(color, position);\n                }\n                else if (piece === 'r' || piece === 'R') {\n                    pieceInstance = new Rook(color, position, this.fen.castlingAvailability);\n                }\n                else if (piece === 'n' || piece === 'N') {\n                    pieceInstance = new Knight(color, position);\n                }\n                else if (piece === 'b' || piece === 'B') {\n                    pieceInstance = new Bishop(color, position);\n                }\n                else if (piece === 'q' || piece === 'Q') {\n                    pieceInstance = new Queen(color, position);\n                }\n                else {\n                    pieceInstance = new King(color, position, this.fen.castlingAvailability);\n                    if (piece === 'k') {\n                        darkKing = pieceInstance;\n                    }\n                    else {\n                        lightKing = pieceInstance;\n                    }\n                }\n                piecesByLocation[position] = pieceInstance;\n                this.piecesByColor[color].push(pieceInstance);\n            }\n        }\n        return { piecesByLocation, kings: { k: darkKing, K: lightKing } };\n    }\n\n    public getLegalMoves(position: string): string[] {\n        const piece = this.piecesByLocation[position];\n        if (piece) {\n            return [...piece.getLegalMoves(this.boardMap, this.fen)];\n        }\n        return [];\n    }\n\n    public move(from: string, to: string, skipValidation: boolean = false): string {\n        let movePiece = this.piecesByLocation[from];\n        if (movePiece) {\n            const legalMoves = movePiece.getLegalMoves(this.boardMap, this.fen);\n            if (legalMoves.includes(to) || skipValidation) {\n                let capturedPiece = false;\n                if (this.piecesByLocation[to] || (`${to[0]}${to[2]}` === this.fen.enPassantTargetSquare && movePiece.name === 'Pawn')) {\n                    let deleteLocation = to;\n                    if (`${to[0]}${to[2]}` === this.fen.enPassantTargetSquare && movePiece.name === 'Pawn') {\n                        deleteLocation = `${to[0]}-`;\n                        if (to[2] === '3') {\n                            deleteLocation += '4';\n                        }\n                        else {\n                            deleteLocation += '5';\n                        }\n                    }\n                    const deletePieceColor = this.piecesByLocation[deleteLocation].color;\n                    for (let i = 0; i < this.piecesByColor[deletePieceColor].length; i++) {\n                        if (this.piecesByColor[deletePieceColor][i] === this.piecesByLocation[deleteLocation]) {\n                            this.piecesByColor[deletePieceColor].splice(i, 1);\n                            break;\n                        }\n                    }\n                    capturedPiece = true;\n                    delete this.piecesByLocation[deleteLocation];\n                    this.boardMap[deleteLocation] = 'x';\n                }\n                movePiece.move(to);\n                if (movePiece.name === 'Pawn' && (movePiece.rank === 1 || movePiece.rank === 8)) {\n                    movePiece = new Queen(movePiece.color, movePiece.position);\n                }\n                this.piecesByLocation[to] = movePiece;\n                this.boardMap[to] = movePiece.code;\n                delete this.piecesByLocation[from];\n                this.boardMap[from] = 'x';\n                this.updateFEN(movePiece, capturedPiece);\n                this.resetLegalMovesAndCheckStatus();\n                this.updateCheckMate();\n            }\n        }\n        return this.fenString;\n    }\n\n    private updateFEN(movePiece: Piece, capturedPiece: boolean): void {\n        this.fen.piecePlacement = rebuildPlacementFromMap(this.boardMap);\n        if (movePiece.color === 'dark') {\n            this.fen.fullMoveNumber += 1;\n        }\n        if (movePiece.name === 'Pawn' || capturedPiece) {\n            this.fen.halfMoveClock = 0;\n        }\n        else {\n            this.fen.halfMoveClock += 1;\n        }\n        this.updateEnPassant(movePiece);\n        this.updateCastling(movePiece);\n        this.fen.activeColor = movePiece.color === 'light' ? 'b' : 'w';\n    }\n\n    private updateCastling(movePiece: Piece): void {\n        // If Piece is king, check if move is castling\n        if (this.fen.castlingAvailability !== '-' && movePiece instanceof King) {\n            const halfMoveClock = this.fen.halfMoveClock;\n            const fullMoveClock = this.fen.fullMoveNumber;\n            // check if it has gone to the castling long or short position\n            if (movePiece.color === 'light') {\n                if (movePiece.position === 'g-1' && this.fen.castlingAvailability.includes('K')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('K', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('Q', '');\n                    this.move('h-1', 'f-1', true);\n                }\n                else if (movePiece.position === 'c-1' && this.fen.castlingAvailability.includes('Q')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('Q', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('K', '');\n                    this.move('a-1', 'd-1', true);\n                }\n            }\n            else {\n                if (movePiece.position === 'g-8' && this.fen.castlingAvailability.includes('k')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('k', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('q', '');\n                    this.move('h-8', 'f-8', true);\n                }\n                else if (movePiece.position === 'c-8' && this.fen.castlingAvailability.includes('q')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('q', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('k', '');\n                    this.move('a-8', 'd-8', true);\n                }\n            }\n            // Reset move number and clock due to moving rook\n            this.fen.halfMoveClock = halfMoveClock;\n            this.fen.fullMoveNumber = fullMoveClock;\n            movePiece.canCastleShort = false;\n            movePiece.canCastleLong = false;\n        }\n        else if (movePiece instanceof Rook && this.fen.castlingAvailability !== '-') {\n            if (movePiece.color === 'light') {\n                if (this.fen.castlingAvailability.includes('K') && movePiece.lastPosition === 'h-1') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('K', '');\n                }\n                else if (this.fen.castlingAvailability.includes('Q') && movePiece.lastPosition === 'a-1') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('Q', '');\n                }\n            }\n            else { // movePiece.color === 'dark'\n                if (this.fen.castlingAvailability.includes('k') && movePiece.lastPosition === 'h-8') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('k', '');\n                }\n                else if (this.fen.castlingAvailability.includes('q') && movePiece.lastPosition === 'a-8') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('q', '');\n                }\n            }\n            movePiece.canCastle = false;\n            movePiece.castleSide = '-';\n        }\n        if (this.fen.castlingAvailability.length === 0) {\n            this.fen.castlingAvailability = '-';\n        }\n    }\n\n    private updateEnPassant(movePiece: Piece) {\n        this.fen.enPassantTargetSquare = '-';\n        if (movePiece instanceof Pawn) {\n            if (movePiece.inStartingPosition) {\n                movePiece.inStartingPosition = false;\n                // If the pawn just moved two spaces\n                if (movePiece.lastPosition && Math.abs(Number(movePiece.lastPosition[2]) - Number(movePiece.position[2])) === 2) {\n                    if (Number(movePiece.lastPosition[2]) > movePiece.rank) {\n                        this.fen.enPassantTargetSquare = `${movePiece.file}${movePiece.rank + 1}`;\n                    }\n                    else {\n                        this.fen.enPassantTargetSquare = `${movePiece.file}${movePiece.rank - 1}`;\n                    }\n                }\n            }\n        }\n    }\n\n    protected filterKingMovesDanger(king: King, enemyPieces: Piece[]): void {\n        // this should just return legalMoves and shouldn't recalculate\n        const kingMoves = king.getLegalMoves(this.boardMap, this.fen);\n        const dangerMoves: string[] = [];\n        for (const enemyPiece of enemyPieces) {\n            if (enemyPiece.legalMoves) {\n                if (enemyPiece instanceof Pawn) {\n                    for (const move of enemyPiece.legalMoves) {\n                        // If move is a capture move/diagonal move\n                        if (move[0] !== enemyPiece.file) {\n                            dangerMoves.push(move);\n                        }\n                    }\n                }\n                else {\n                    dangerMoves.push(...enemyPiece.legalMoves);\n                }\n                for (const defense of enemyPiece.defending) {\n                    dangerMoves.push(defense.position);\n                }\n            }\n        }\n        king.legalMoves = kingMoves.filter(move => !dangerMoves.includes(move));\n    }\n\n    // Mutates the list of moves to remove any moves that don't defend king\n    protected filterMovesCheck(piece: Piece, king: King, enemyPieces: Piece[], moves: string[]): string[] {\n        const checkedByPiece = king.checkBy ? this.piecesByLocation[king.checkBy] : null;\n        let filteredMoves: string[] = [];\n        if (checkedByPiece && moves.length > 0) {\n            const checkType = checkedByPiece.moveType;\n            // For King pieces, filter out moves that overlap enemy moves\n            if (piece.name === 'King') {\n                const dangerMoves: string[] = [];\n                for (const enemyPiece of enemyPieces) {\n                    if (enemyPiece.legalMoves) {\n                        dangerMoves.push(...enemyPiece.legalMoves);\n                        for (const defense of enemyPiece.defending) {\n                            dangerMoves.push(defense.position);\n                        }\n                    }\n                }\n                // Check straight line pieces\n                if (checkedByPiece instanceof Queen || checkedByPiece instanceof Rook) {\n                    // If king and attacker are on the same row\n                    if (checkedByPiece.rank === king.rank) {\n                        // If attacker is to the left of king\n                        if (checkedByPiece.file.charCodeAt(0) < king.file.charCodeAt(0)) {\n                            // King cannot move right\n                            dangerMoves.push(`${shiftChar(king.file, 1)}-${king.rank}`);\n                        }\n                        // Else the attacker is to the right of king\n                        else {\n                            // King cannot move left\n                            dangerMoves.push(`${shiftChar(king.file, -1)}-${king.rank}`);\n                        }\n                    }\n                    // Else if king and attacker are on same column\n                    else if (checkedByPiece.file === king.file) {\n                        // If attacker is above king\n                        if (checkedByPiece.rank > king.rank) {\n                            // King cannot move down\n                            dangerMoves.push(`${king.file}-${king.rank - 1}`);\n                        }\n                        // Else attacker is below king\n                        else {\n                            // King cannot move up\n                            dangerMoves.push(`${king.file}-${king.rank + 1}`);\n                        }\n                    }\n                }\n                // Check diagonal pieces\n                if (checkedByPiece instanceof Queen || checkedByPiece instanceof Bishop) {\n                    // If king is up-left\n                    if (king.file.charCodeAt(0) < checkedByPiece.file.charCodeAt(0) && king.rank > checkedByPiece.rank) {\n                        // King cannot move up-left\n                        dangerMoves.push(`${shiftChar(king.file, -1)}-${king.rank + 1}`);\n                    }\n                    // If king is up-right\n                    else if (king.file.charCodeAt(0) > checkedByPiece.file.charCodeAt(0) && king.rank > checkedByPiece.rank) {\n                        dangerMoves.push(`${shiftChar(king.file, 1)}-${king.rank + 1}`);\n                    }\n                    // If king is down-left\n                    else if (king.file.charCodeAt(0) < checkedByPiece.file.charCodeAt(0) && king.rank < checkedByPiece.rank) {\n                        dangerMoves.push(`${shiftChar(king.file, -1)}-${king.rank - 1}`);\n                    }\n                    // If king is down-right\n                    else if (king.file.charCodeAt(0) > checkedByPiece.file.charCodeAt(0) && king.rank < checkedByPiece.rank) {\n                        dangerMoves.push(`${shiftChar(king.file, 1)}-${king.rank - 1}`);\n                    }\n                }\n                filteredMoves = moves.filter(move => !dangerMoves.includes(move));\n            }\n            // Else, filter out moves that don't defend King\n            else {\n                const enemyMoves = checkedByPiece.legalMoves;\n                const enemyLocation = checkedByPiece.position;\n                if (enemyMoves && enemyLocation) {\n                    const validMoves: string[] = [enemyLocation];\n                    // If consecutive movement, either block or take piece\n                    if (checkType === 'consecutive') {\n                        // If king and attacker are on same vertical line, add all ranks between and enemyLocation\n                        if (checkedByPiece.file === king.file) {\n                            // If king is above attacker\n                            if (king.rank > checkedByPiece.rank) {\n                                for (let i = king.rank - 1; i > checkedByPiece.rank; i--) {\n                                    const move = `${king.file}-${i}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                            // Else king is below attacker\n                            else {\n                                for (let i = checkedByPiece.rank - 1; i > king.rank; i--) {\n                                    const move = `${king.file}-${i}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                        }\n                        // If king and attacker are on the same rank\n                        else if (checkedByPiece.rank === king.rank) {\n                            const kingFile = king.file.charCodeAt(0);\n                            const enemyFile = checkedByPiece.file.charCodeAt(0);\n                            // If king is to the left of the attacker\n                            if (kingFile < enemyFile) {\n                                for (let i = kingFile + 1; i < enemyFile; i++) {\n                                    const move = `${String.fromCharCode(i)}-${king.rank}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                            // Else king is to the right of the attacker\n                            else {\n                                for (let i = enemyFile + 1; i < kingFile; i++) {\n                                    const move = `${String.fromCharCode(i)}-${king.rank}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                        }\n                        // Else they are diagonal\n                        else {\n                            const kingFile = king.file.charCodeAt(0);\n                            const enemyFile = checkedByPiece.file.charCodeAt(0);\n                            // If king is to the left, use king, else, use enemy\n                            let fileTracker = kingFile < enemyFile ? kingFile + 1 : enemyFile + 1;\n                            let startRank;\n                            let endRank;\n                            // If king is above\n                            if (king.rank > checkedByPiece.rank) {\n                                startRank = checkedByPiece.rank + 1;\n                                endRank = king.rank;\n                            }\n                            // Else king is below\n                            else {\n                                startRank = king.rank + 1;\n                                endRank = checkedByPiece.rank;\n                            }\n                            for (let i = startRank; i < endRank; i++) {\n                                const move = `${String.fromCharCode(fileTracker)}-${i}`;\n                                validMoves.push(move);\n                                fileTracker += 1;\n                            }\n                        }\n                    }\n                    // Else, can only take piece out\n                    filteredMoves = moves.filter(move => validMoves.includes(move));\n                }\n            }\n        }\n        piece.legalMoves = filteredMoves;\n        return filteredMoves;\n    }\n\n    // Remove moves that would expose king to an attacker\n    protected filterMovesThatExposeKing(piece: Piece, king: King): string[] {\n        // Simulate move and see if king is in check\n        const pieceMoves = piece.getLegalMoves(this.boardMap, this.fen);\n        const kingOriginalCheckStatus = king.isInCheck;\n        const kingOriginalCheckBy = king.checkBy;\n        const filteredMoves: string[] = [];\n        for (const move of pieceMoves) {\n            const testBoard: BoardMap = JSON.parse(JSON.stringify(this.boardMap));\n            testBoard[move] = piece.code;\n            testBoard[piece.position] = 'x';\n            king.getCheckStatus(testBoard);\n            if (!king.isInCheck) {\n                filteredMoves.push(move);\n            }\n        }\n        // Reset king check status\n        king.isInCheck = kingOriginalCheckStatus;\n        king.checkBy = kingOriginalCheckBy;\n        return filteredMoves;\n    }\n\n    private processMovesForColor(color: Color, filterMovesCheck: boolean): void {\n        let pieces: Piece[];\n        let king: King;\n        let enemyPieces: Piece[];\n        if (color === 'light') {\n            pieces = this.piecesByColor.light;\n            king = this.kings.K;\n            enemyPieces = this.piecesByColor.dark;\n        }\n        else {\n            pieces = this.piecesByColor.dark;\n            king = this.kings.k;\n            enemyPieces = this.piecesByColor.light;\n        }\n        for (const piece of pieces) {\n            const moves = piece.getLegalMoves(this.boardMap, this.fen);\n            if (filterMovesCheck) {\n                this.filterMovesCheck(piece, king, enemyPieces, moves);\n            }\n            if (piece instanceof King) {\n                this.filterKingMovesDanger(piece, enemyPieces);\n            }\n            else {\n                piece.legalMoves = this.filterMovesThatExposeKing(piece, king);\n            }\n        }\n    }\n\n    private resetLegalMovesAndCheckStatus(): void {\n        let justMoved: Color;\n        let activeColor: Color;\n        if (this.fen.activeColor === 'w') {\n            justMoved = 'dark';\n            activeColor = 'light';\n        }\n        else {\n            justMoved = 'light';\n            activeColor = 'dark';\n        }\n        for (const location of Object.keys(this.piecesByLocation)) {\n            this.piecesByLocation[location].resetLegalMoves();\n        }\n        this.processMovesForColor(justMoved, false);\n        this.updateCheckStatus();\n        this.processMovesForColor(activeColor, this.checkStatus !== 'none');\n        this.checkTieStatus();\n    }\n\n    private checkTieStatus(): void {\n        // Tie is declared when active color is not in check but has no legal moves available\n        if (this.checkStatus === 'none') {\n            const activeColor = this.fen.activeColor === 'w' ? 'light' : 'dark';\n            let canMove = false;\n            for (const piece of this.piecesByColor[activeColor]) {\n                if (piece.getLegalMoves(this.boardMap, this.fen).length > 0) {\n                    canMove = true;\n                    break;\n                }\n            }\n            if (!canMove) {\n                this.tie = true;\n            }\n        }\n    }\n\n    private getPiecesForOppositeColor(color: Color): Piece[] {\n        const oppositeColor = color === 'light' ? 'dark' : 'light';\n        return this.piecesByColor[oppositeColor];\n    }\n\n    private updateCheckStatus(): void {\n        /*\n        Rules for Check:\n            1. King pieces lies within an enemy piece's legal positions\n            2. You only need to check if active color's king is in check\n        Consideration:\n            * If a FEN string is a checkmate, this may not calculate properly\n         */\n        let checkStatus: CheckStatus = 'none';\n        const activeColor = this.fen.activeColor === 'w' ? 'light' : 'dark';\n        const king = activeColor === 'light' ? this.kings.K : this.kings.k;\n        const isCheck = king.getCheckStatus(this.boardMap);\n        if (isCheck.check) {\n            checkStatus = activeColor;\n        }\n        this.checkStatus = checkStatus;\n    }\n\n    private updateCheckMate(): void {\n        /*\n        Rules for checkmate:\n            1. King cannot move\n            2. No pieces can cover the King\n         */\n        const possibleMoves = [];\n        if (this.checkStatus !== 'none') {\n            const pieces = this.piecesByColor[this.checkStatus];\n            for (const piece of pieces) {\n                // This should already be pre-calculated and filtered for checked move sets\n                const legalMoves = piece.getLegalMoves(this.boardMap, this.fen);\n                possibleMoves.push(...legalMoves);\n            }\n            this.checkMateStatus = possibleMoves.length === 0;\n        }\n    }\n\n    /*\n    private promotePawn(pawn: Piece): Piece {\n        return new Queen(pawn.color, pawn.position);\n    }\n     */\n\n    public print(): void {\n        console.log(`\n8|${this.boardMap['a-8']}|${this.boardMap['b-8']}|${this.boardMap['c-8']}|${this.boardMap['d-8']}|${this.boardMap['e-8']}|${this.boardMap['f-8']}|${this.boardMap['g-8']}|${this.boardMap['h-8']}|\n7|${this.boardMap['a-7']}|${this.boardMap['b-7']}|${this.boardMap['c-7']}|${this.boardMap['d-7']}|${this.boardMap['e-7']}|${this.boardMap['f-7']}|${this.boardMap['g-7']}|${this.boardMap['h-7']}|\n6|${this.boardMap['a-6']}|${this.boardMap['b-6']}|${this.boardMap['c-6']}|${this.boardMap['d-6']}|${this.boardMap['e-6']}|${this.boardMap['f-6']}|${this.boardMap['g-6']}|${this.boardMap['h-6']}|\n5|${this.boardMap['a-5']}|${this.boardMap['b-5']}|${this.boardMap['c-5']}|${this.boardMap['d-5']}|${this.boardMap['e-5']}|${this.boardMap['f-5']}|${this.boardMap['g-5']}|${this.boardMap['h-5']}|\n4|${this.boardMap['a-4']}|${this.boardMap['b-4']}|${this.boardMap['c-4']}|${this.boardMap['d-4']}|${this.boardMap['e-4']}|${this.boardMap['f-4']}|${this.boardMap['g-4']}|${this.boardMap['h-4']}|\n3|${this.boardMap['a-3']}|${this.boardMap['b-3']}|${this.boardMap['c-3']}|${this.boardMap['d-3']}|${this.boardMap['e-3']}|${this.boardMap['f-3']}|${this.boardMap['g-3']}|${this.boardMap['h-3']}|\n2|${this.boardMap['a-2']}|${this.boardMap['b-2']}|${this.boardMap['c-2']}|${this.boardMap['d-2']}|${this.boardMap['e-2']}|${this.boardMap['f-2']}|${this.boardMap['g-2']}|${this.boardMap['h-2']}|\n1|${this.boardMap['a-1']}|${this.boardMap['b-1']}|${this.boardMap['c-1']}|${this.boardMap['d-1']}|${this.boardMap['e-1']}|${this.boardMap['f-1']}|${this.boardMap['g-1']}|${this.boardMap['h-1']}|\n  a b c d e g h h`);\n    }\n\n    public get fenString(): string {\n        return stringifyFEN(this.fen);\n    }\n}\n","import { Color, Piece } from '../pieces/Piece';\r\nimport { BoardMap, FEN } from '../../utils/utils';\r\n\r\nexport abstract class AI {\r\n    color: Color;\r\n\r\n    protected constructor(color: Color) {\r\n        this.color = color;\r\n    }\r\n\r\n    move(board: BoardMap, fen: FEN, pieces: Piece[]): { from: string, to: string } {\r\n        return { from: '', to: '' };\r\n    }\r\n}\r\n\r\nexport default AI;\r\n","import AI from './AI';\r\nimport { Color, Piece } from '../pieces/Piece';\r\nimport { BoardMap, FEN } from '../../utils/utils';\r\n\r\nexport class RandomMover extends AI {\r\n    name: string;\r\n\r\n    constructor(color: Color) {\r\n        super(color);\r\n        this.name = 'Random Mover';\r\n    }\r\n\r\n    move(board: BoardMap, fen: FEN, pieces: Piece[]): { from: string, to: string } {\r\n        const allMoves = [];\r\n        for (const piece of pieces) {\r\n            for (const move of piece.getLegalMoves(board, fen)) {\r\n                allMoves.push({ from: piece.position, to: move });\r\n            }\r\n        }\r\n        if (allMoves.length > 0) {\r\n            const randInt = Math.floor(Math.random() * allMoves.length);\r\n            return allMoves[randInt];\r\n        }\r\n        return { from: '', to: '' };\r\n    }\r\n}\r\n","import AI from './AI';\r\nimport { Color, Piece } from '../pieces/Piece';\r\nimport { BoardMap, FEN } from '../../utils/utils';\r\n\r\ninterface GenericScore {\r\n    [index: string]: any\r\n}\r\n\r\nexport class MatrixEvaluator extends AI {\r\n    name: string;\r\n    scores: GenericScore = {\r\n        pieces: {\r\n            Pawn: 1,\r\n            Knight: 2,\r\n            Bishop: 3,\r\n            Rook: 3,\r\n            Queen: 4,\r\n            King: 5,\r\n        },\r\n        capture: {\r\n            multiplier: 2,\r\n        },\r\n        pressure: {\r\n            multiplier: 1.5,\r\n        },\r\n        // Danger scores represent how dangerous it is to lose this piece\r\n        danger: {\r\n            multiplier: -1,\r\n        },\r\n        defending: {\r\n            multiplier: 1.5,\r\n        },\r\n        defended: {\r\n            multiplier: 1.5,\r\n        },\r\n    }\r\n\r\n    constructor(color: Color) {\r\n        super(color);\r\n        this.name = 'Matrix Evaluator';\r\n    }\r\n\r\n    move(board: BoardMap, fen: FEN, pieces: Piece[]): { from: string, to: string } {\r\n        const allMoves = [];\r\n        for (const piece of pieces) {\r\n            if (piece.color === this.color) {\r\n                for (const move of piece.getLegalMoves(board, fen)) {\r\n                    const score = this.evaluateMove(piece, move, board, fen, pieces);\r\n                    allMoves.push({ from: piece.position, to: move, score });\r\n                }\r\n            }\r\n        }\r\n        if (allMoves.length > 0) {\r\n            // Sort in ascending order\r\n            allMoves.sort((a, b) => a.score - b.score);\r\n            const highScore = allMoves[allMoves.length - 1].score;\r\n            const maxMoveScores = allMoves.filter((move) => move.score === highScore);\r\n            const randInt = Math.floor(Math.random() * maxMoveScores.length);\r\n            return { from: maxMoveScores[randInt].from, to: maxMoveScores[randInt].to };\r\n        }\r\n        return { from: '', to: '' };\r\n    }\r\n\r\n    evaluateMove(evaluatedPiece: Piece, move: string, board: BoardMap, fen: FEN, pieces: Piece[]): number {\r\n        let score = 0;\r\n        const boardOccupation = board[move];\r\n        if (boardOccupation !== 'x') {\r\n            const piece = this.findPieceAtPosition(move, pieces);\r\n            if (piece) {\r\n                score += this.scores.pieces[piece.name] * this.scores.capture.multiplier;\r\n            }\r\n            const piecesWithMovesAtPosition = this.findPiecesWithMovesToPosition(move, pieces);\r\n            if (piecesWithMovesAtPosition) {\r\n                const defenders = piecesWithMovesAtPosition.filter((piece) => piece.color === this.color);\r\n                const attackers = piecesWithMovesAtPosition.filter((piece) => piece.color !== this.color);\r\n                for (const attacker of attackers) {\r\n                    score += this.scores.pieces[attacker.name] * this.scores.danger.multiplier;\r\n                }\r\n                for (const defender of defenders) {\r\n                    score += this.scores.pieces[defender.name] * this.scores.defending.multiplier;\r\n                }\r\n            }\r\n            if (this.moveIsForward(evaluatedPiece, move)) {\r\n                score += 1;\r\n            }\r\n        }\r\n        return score;\r\n    }\r\n\r\n    findPieceAtPosition(move: string, pieces: Piece[]): Piece | undefined {\r\n        return pieces.find((piece) => piece.position === move);\r\n    }\r\n\r\n    findPiecesWithMovesToPosition(move: string, pieces: Piece[]): Piece[] | undefined {\r\n        return pieces.filter((piece) => piece.legalMoves?.includes(move));\r\n    }\r\n\r\n    // If move pushes piece towards opposite end\r\n    moveIsForward(evaluatedPiece: Piece, move: string): boolean {\r\n        if (this.color === 'light') {\r\n            return Number(move[2]) > evaluatedPiece.rank;\r\n        }\r\n        return Number(move[2]) < evaluatedPiece.rank;\r\n    }\r\n}\r\n","\nimport { defineComponent } from 'vue';\nimport CanvasBoard from '@/board/CanvasBoard.vue';\nimport { Selection } from '@/board/BoardUtils';\nimport { FEN } from '@/utils/utils';\nimport { Chess } from '@/engine/Chess';\nimport AI from '@/engine/ai/AI';\nimport { RandomMover } from '@/engine/ai/RandomMover';\nimport { MatrixEvaluator } from '@/engine/ai/MatrixEvaluator';\n\ninterface AppData {\n    containerHeight: number,\n    containerWidth: number,\n    isMounted: boolean,\n    legalMoves: string[],\n    startingFen: string,\n    fenString: string,\n    fen: FEN,\n    useAi: boolean,\n    ai: null | AI,\n    engine: Chess,\n    selectedPiece: string,\n}\n\ninterface MovePayload {\n    from: string,\n    to: string,\n    piece: string,\n}\n\nexport default defineComponent({\n    name: 'Play',\n    components: {\n        CanvasBoard,\n    },\n    data(): AppData {\n        return {\n            containerHeight: 300,\n            containerWidth: 300,\n            isMounted: false,\n            legalMoves: [],\n            startingFen: '',\n            fenString: '',\n            fen: {\n                piecePlacement: '',\n                activeColor: '',\n                castlingAvailability: '',\n                enPassantTargetSquare: '',\n                halfMoveClock: 0,\n                fullMoveNumber: 0,\n            },\n            useAi: false,\n            ai: null,\n            engine: new Chess(),\n            selectedPiece: '',\n        };\n    },\n    mounted() {\n        this.fenString = String(this.$route.query.fen);\n        this.startingFen = this.fenString;\n        this.useAi = this.$route.query.ai === 'true';\n        if (this.useAi) {\n            console.log('Creating AI player');\n            if (this.$route.query.aiType === 'RandomMover') {\n                this.ai = new RandomMover('dark');\n            }\n            else if (this.$route.query.aiType === 'MatrixEvaluator') {\n                this.ai = new MatrixEvaluator('dark');\n            }\n        }\n        this.engine = new Chess(this.fenString);\n        console.log('created new engine');\n        this.onResize();\n        window.addEventListener('resize', this.onResize);\n        this.isMounted = true;\n    },\n    methods: {\n        onResize() {\n            this.containerHeight = window.innerHeight;\n            this.containerWidth = window.innerWidth * 0.6;\n        },\n        calculateLegalMoves(selection: Selection) {\n            this.selectedPiece = `${selection.piece}, ${selection.place}`;\n            this.legalMoves = this.engine.getLegalMoves(selection.place);\n        },\n        clearLegalMoves() {\n            this.selectedPiece = '';\n            this.legalMoves.length = 0;\n        },\n        makeMove(payload: MovePayload) {\n            this.fenString = this.engine.move(payload.from, payload.to);\n            if (this.ai && this.engine.fen.activeColor === 'b') {\n                // @ts-ignore\n                const move = this.ai.move(this.engine.boardMap, this.engine.fen, this.engine.piecesByColor.dark);\n                console.log(`AI move: from ${move.from} to ${move.to}`);\n                this.fenString = this.engine.move(move.from, move.to);\n            }\n        },\n        restart() {\n            this.fenString = this.startingFen;\n            this.engine = new Chess(this.fenString);\n        },\n    },\n});\n","import { render } from \"./Play.vue?vue&type=template&id=2aff1b75&ts=true\"\nimport script from \"./Play.vue?vue&type=script&lang=ts\"\nexport * from \"./Play.vue?vue&type=script&lang=ts\"\n\nimport \"./Play.vue?vue&type=style&index=0&id=2aff1b75&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router';\nimport MainMenu from '@/menus/MainMenu.vue';\nimport Play from '@/menus/Play.vue';\n\nconst routes = [\n    { path: '/', component: MainMenu },\n    { path: '/play', component: Play },\n];\n\nexport default createRouter({\n    history: createWebHashHistory(),\n    routes,\n});\n","import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from '@/router';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\n\nconst app = createApp(App);\napp.use(router);\napp.mount('#app');\n","module.exports = __webpack_public_path__ + \"img/113.8e8aadb6.svg\";","module.exports = __webpack_public_path__ + \"img/110.7ff2da55.svg\";"],"sourceRoot":""}