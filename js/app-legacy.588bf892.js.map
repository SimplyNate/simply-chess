{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/menus/Play.vue?f182","webpack:///./src/assets/pieces/81.svg","webpack:///./src/assets/pieces/98.svg","webpack:///./src/assets/pieces/75.svg","webpack:///./src/assets/pieces/112.svg","webpack:///./src/assets/pieces/78.svg","webpack:///./src/assets/pieces/107.svg","webpack:///./src/assets/pieces/82.svg","webpack:///./src/assets/pieces/66.svg","webpack:///./src/menus/MainMenu.vue?1942","webpack:///./src/assets/pieces/114.svg","webpack:///./src/assets/pieces/80.svg","webpack:///./src/App.vue?6200","webpack:///./src/App.vue?3be4","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/menus/MainMenu.vue?7ceb","webpack:///./src/menus/MainMenu.vue","webpack:///./src/menus/MainMenu.vue?9933","webpack:///./src/menus/Play.vue?ae35","webpack:///./src/board/CanvasBoard.vue?6a06","webpack:///./src/utils/utils.ts","webpack:///./src/board/Collision.ts","webpack:///./src/board/CanvasBoard.vue","webpack:///./src/board/CanvasBoard.vue?3b94","webpack:///./src/engine/pieces/Piece.ts","webpack:///./src/engine/pieces/Pawn.ts","webpack:///./src/engine/pieces/Knight.ts","webpack:///./src/engine/pieces/King.ts","webpack:///./src/engine/pieces/Queen.ts","webpack:///./src/engine/pieces/Bishop.ts","webpack:///./src/engine/pieces/Rook.ts","webpack:///./src/engine/Chess.ts","webpack:///./src/engine/ai/AI.ts","webpack:///./src/engine/ai/RandomMover.ts","webpack:///./src/engine/ai/MatrixEvaluator.ts","webpack:///./src/menus/Play.vue","webpack:///./src/menus/Play.vue?04ef","webpack:///./src/router.ts","webpack:///./src/main.ts","webpack:///./src/assets/pieces/113.svg","webpack:///./src/assets/pieces/110.svg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_router_view","__exports__","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","style","_hoisted_20","onClick","startGame","type","$event","load","placeholder","playAs","useAi","selectedAi","aiList","ai","methods","validateFen","this","game","$router","id","_component_canvas_board","engine","fen","piecePlacement","activeColor","castlingAvailability","enPassantTargetSquare","halfMoveClock","fullMoveNumber","checkStatus","checkMateStatus","tie","selectedPiece","legalMoves","restart","containerWidth","containerHeight","isMounted","fenString","onSelected","calculateLegalMoves","onDeselected","clearLegalMoves","onMove","makeMove","ref","separateFEN","split","Number","stringifyFEN","convertRowToArray","row","positions","char","charCodeAt","number","fillArray","Array","fill","parsePlacementToMap","map","rows","rank","f","filterAndSortPositionsToArray","filter","position","includes","sort","a","b","splitBoardMapToArray","boardMap","keys","rebuildPlacementFromMap","localAccumulator","piece","shiftChar","by","String","fromCharCode","rankAndFile","calculateCollision","x","y","node","globalOffset","bX1","bY1","bX2","width","bY2","height","getPointerCollision","px","py","legalSpaces","lastCollision","parent","filtered","Math","abs","place","emits","props","currentBoardRepresentation","default","boardConfig","legalMovesForSelection","app","containerLength","squareLength","boardContainer","pieces","textures","svgs","squareMap","dark","light","drag","dragData","dragNode","tempContainer","originalParent","highlight","originalPlace","closestTarget","legalTargets","placedPieces","freeSpaces","cachedCollision","watch","updateFEN","deep","handler","highlightLegalMoves","mounted","applyConfig","element","$refs","board","antialias","resolution","devicePixelRatio","backgroundAlpha","resizeTo","calculateContainerLength","calculateSquareLength","loadSVGs","loadTextures","container","interactive","on","onDragMove","stage","addChild","appendChild","view","drawBoard","screen","pivot","calculateGlobalOffset","beforeUnmount","destroy","startX","startY","color","getColorForSquare","drawSquare","charCode","B","K","N","P","Q","R","k","q","from","clearPieces","placePieces","findFreeSpaces","boardArray","isPieceInteractive","pop","texture","sprite","buttonMode","onDragStart","onDragEnd","anchor","set","boardSquare","alpha","squareContainer","square","beginFill","drawRect","endFill","event","currentTarget","createHighlight","selected","$emit","setParent","beginHole","endHole","movePayload","to","console","log","clearDrag","clearHighlight","newPosition","getLocalPosition","clearCollision","collision","move","parentWidth","parentHeight","moveType","lastPosition","code","parseCode","file","currentBoard","moves","isValidMovePosition","lowerRangeEnemyCodes","upperRangeEnemyCodes","lowerRangeAllyCodes","upperRangeAllyCodes","moveCharCode","defending","pieceCode","straight","diagonal","moveArray","lookUpLeft","lookUp","lookUpRight","lookDownRight","lookDown","lookDownLeft","lookLeft","lookRight","isMoveCapture","fileNumber","fileLowerBound","fileUpperBound","toLowerCase","toUpperCase","direction","inStartingPosition","newRank","move1","move2","leftFile","rightFile","possibleEPSquares","possibleSquare","enPassantCheck","isOppositeColor","filterValidMoves","canCastleShort","canCastleLong","checkCastlingForAttackers","canPerformCastleShort","checkPositions","good","castleShortPosition","canPerformCastleLong","castleLongPosition","currentCheckStatus","checkBy","currentInCheck","isInCheck","currentPosition","currentRank","currentFile","pos","boardCopy","JSON","parse","stringify","getCheckStatus","check","attackingPieceCode","attackers","piece1","piece2","aKnight","aPawn","aQueen","aRook","aBishop","possibleKnightPositions","findAttackersFromPositions","possiblePawnPositions","up","down","left","right","upLeft","upRight","downLeft","downRight","checkDirection","consecutiveMoveSearch","canCastle","castleSide","parsePieces","piecesByLocation","kings","resetLegalMovesAndCheckStatus","updateCheckMate","lightKing","darkKing","pieceInstance","piecesByColor","getLegalMoves","skipValidation","movePiece","capturedPiece","deleteLocation","deletePieceColor","updateEnPassant","updateCastling","fullMoveClock","replace","king","enemyPieces","kingMoves","dangerMoves","enemyPiece","defense","checkedByPiece","filteredMoves","checkType","enemyMoves","enemyLocation","validMoves","kingFile","enemyFile","startRank","endRank","fileTracker","pieceMoves","kingOriginalCheckStatus","kingOriginalCheckBy","testBoard","filterMovesCheck","filterKingMovesDanger","filterMovesThatExposeKing","justMoved","location","resetLegalMoves","processMovesForColor","updateCheckStatus","checkTieStatus","canMove","oppositeColor","isCheck","possibleMoves","allMoves","randInt","floor","random","Pawn","Knight","Bishop","Rook","Queen","King","capture","multiplier","pressure","danger","defended","score","evaluateMove","highScore","maxMoveScores","evaluatedPiece","boardOccupation","findPieceAtPosition","scores","piecesWithMovesAtPosition","findPiecesWithMovesToPosition","defenders","attacker","defender","moveIsForward","find","components","CanvasBoard","startingFen","$route","query","aiType","onResize","addEventListener","innerHeight","innerWidth","selection","payload","routes","path","component","MainMenu","Play","history","App","use","router","mount"],"mappings":"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","file":"js/app-legacy.588bf892.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/simply-chess/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Play.vue?vue&type=style&index=0&id=2aff1b75&lang=css\"","module.exports = __webpack_public_path__ + \"img/81.518cd5f8.svg\";","module.exports = __webpack_public_path__ + \"img/98.702c526d.svg\";","module.exports = __webpack_public_path__ + \"img/75.5aad6e48.svg\";","module.exports = __webpack_public_path__ + \"img/112.876f1ece.svg\";","module.exports = __webpack_public_path__ + \"img/78.e6294efe.svg\";","module.exports = __webpack_public_path__ + \"img/107.8805b9ad.svg\";","module.exports = __webpack_public_path__ + \"img/82.095b1a06.svg\";","module.exports = __webpack_public_path__ + \"img/66.54dd3ab6.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./MainMenu.vue?vue&type=style&index=0&id=205d7497&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/114.174de4ee.svg\";","module.exports = __webpack_public_path__ + \"img/80.e38a4f66.svg\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=080ffed2&lang=css\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"app\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_router_view = _resolveComponent(\"router-view\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_router_view)\n  ]))\n}","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'App',\n});\n","import { render } from \"./App.vue?vue&type=template&id=080ffed2&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=080ffed2&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, vModelCheckbox as _vModelCheckbox, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-205d7497\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"fullscreen\" }\nconst _hoisted_2 = { class: \"container position-absolute top-50 start-50 translate-middle\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", { class: \"pb-3 pt-3 text-large\" }, \"Simply Chess\", -1))\nconst _hoisted_4 = { class: \"row\" }\nconst _hoisted_5 = { class: \"col border border-light rounded-1 ms-3 me-3\" }\nconst _hoisted_6 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", { class: \"pt-3\" }, \"Start a New Game\", -1))\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"pt-3\" }, \"Start a new game in default starting position.\", -1))\nconst _hoisted_8 = { class: \"col border border-light rounded-1 ms-3 me-3\" }\nconst _hoisted_9 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", { class: \"pt-3\" }, \"Load a Game\", -1))\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", { class: \"pt-3\" }, \"Load an existing game using a FEN string.\", -1))\nconst _hoisted_11 = { class: \"input-group mb-3\" }\nconst _hoisted_12 = { class: \"row\" }\nconst _hoisted_13 = { class: \"col border border-light rounded-1 ms-3 me-3 mt-3\" }\nconst _hoisted_14 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Additional Settings\", -1))\nconst _hoisted_15 = /*#__PURE__*/_createTextVNode(\"Play as: \")\nconst _hoisted_16 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", null, \"light\", -1))\nconst _hoisted_17 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", null, \"dark\", -1))\nconst _hoisted_18 = [\n  _hoisted_16,\n  _hoisted_17\n]\nconst _hoisted_19 = { style: {\"margin-bottom\":\".1em\"} }\nconst _hoisted_20 = /*#__PURE__*/_createTextVNode(\" Use AI?\")\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createElementVNode(\"div\", _hoisted_5, [\n          _hoisted_6,\n          _hoisted_7,\n          _createElementVNode(\"button\", {\n            class: \"btn btn-success mb-3\",\n            onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.startGame && _ctx.startGame(...args)))\n          }, \"New Game\")\n        ]),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _hoisted_9,\n          _hoisted_10,\n          _createElementVNode(\"div\", _hoisted_11, [\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"form-control\",\n              type: \"text\",\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.load) = $event)),\n              placeholder: \"Input FEN string here.\"\n            }, null, 512), [\n              [_vModelText, _ctx.load]\n            ]),\n            _createElementVNode(\"button\", {\n              class: \"btn btn-success\",\n              onClick: _cache[2] || (_cache[2] = \n//@ts-ignore\n(...args) => (_ctx.startGame && _ctx.startGame(...args)))\n            }, \"Load Game\")\n          ])\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_12, [\n        _createElementVNode(\"div\", _hoisted_13, [\n          _hoisted_14,\n          _createElementVNode(\"div\", null, [\n            _hoisted_15,\n            _withDirectives(_createElementVNode(\"select\", {\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.playAs) = $event))\n            }, _hoisted_18, 512), [\n              [_vModelSelect, _ctx.playAs]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_19, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.useAi) = $event))\n            }, null, 512), [\n              [_vModelCheckbox, _ctx.useAi]\n            ]),\n            _hoisted_20\n          ]),\n          (_ctx.useAi)\n            ? _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                key: 0,\n                style: {\"margin-bottom\":\".2em\"},\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_ctx.selectedAi) = $event))\n              }, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.aiList, (ai) => {\n                  return (_openBlock(), _createElementBlock(\"option\", { key: ai }, _toDisplayString(ai), 1))\n                }), 128))\n              ], 512)), [\n                [_vModelSelect, _ctx.selectedAi]\n              ])\n            : _createCommentVNode(\"\", true)\n        ])\n      ])\n    ])\n  ]))\n}","\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n    name: 'MainMenu',\n    data() {\n        return {\n            load: null,\n            useAi: false,\n            aiList: [\n                'RandomMover',\n                'MatrixEvaluator',\n            ],\n            selectedAi: 'RandomMover',\n            playAs: 'light',\n        };\n    },\n    methods: {\n        validateFen(): boolean {\n            if (this.load) {\n                return true;\n            }\n            return true;\n        },\n        startGame() {\n            if (this.validateFen()) {\n                const game = this.load ? this.load : 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 0';\n                this.$router.push(`/play?fen=${game}&playAs=${this.playAs}&ai=${this.useAi}&aiType=${this.selectedAi}`);\n            }\n        },\n    },\n});\n","import { render } from \"./MainMenu.vue?vue&type=template&id=205d7497&scoped=true&ts=true\"\nimport script from \"./MainMenu.vue?vue&type=script&lang=ts\"\nexport * from \"./MainMenu.vue?vue&type=script&lang=ts\"\n\nimport \"./MainMenu.vue?vue&type=style&index=0&id=205d7497&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-205d7497\"]])\n\nexport default __exports__","import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createBlock as _createBlock, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"app\",\n  class: \"d-flex flex-row\"\n}\nconst _hoisted_2 = { class: \"side-menu mt-1 align-self-center\" }\nconst _hoisted_3 = { class: \"w-100\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Simply Chess\", -1)\nconst _hoisted_5 = {\n  key: 0,\n  class: \"w-100\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"w-100\"\n}\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Tie game!\", -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_canvas_board = _resolveComponent(\"canvas-board\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _hoisted_4,\n        _createElementVNode(\"p\", null, \"Piece Placement: \" + _toDisplayString(_ctx.engine.fen.piecePlacement), 1),\n        _createElementVNode(\"p\", null, \"Active Color: \" + _toDisplayString(_ctx.engine.fen.activeColor), 1),\n        _createElementVNode(\"p\", null, \"Castling Availability: \" + _toDisplayString(_ctx.engine.fen.castlingAvailability), 1),\n        _createElementVNode(\"p\", null, \"En Passant Target Square: \" + _toDisplayString(_ctx.engine.fen.enPassantTargetSquare), 1),\n        _createElementVNode(\"p\", null, \"Half Move Clock: \" + _toDisplayString(_ctx.engine.fen.halfMoveClock), 1),\n        _createElementVNode(\"p\", null, \"Full Move Number: \" + _toDisplayString(_ctx.engine.fen.fullMoveNumber), 1),\n        _createElementVNode(\"p\", null, \"Check Status: \" + _toDisplayString(_ctx.engine.checkStatus), 1),\n        _createElementVNode(\"p\", null, \"Check Mate Status: \" + _toDisplayString(_ctx.engine.checkMateStatus), 1),\n        _createElementVNode(\"p\", null, \"Tie Status: \" + _toDisplayString(_ctx.engine.tie), 1),\n        _createElementVNode(\"p\", null, \"Selected Piece: \" + _toDisplayString(_ctx.selectedPiece), 1),\n        _createElementVNode(\"p\", null, \"Legal Moves: \" + _toDisplayString(_ctx.legalMoves), 1)\n      ]),\n      (_ctx.engine.checkMateStatus)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n            _createElementVNode(\"h2\", null, \"Winner: \" + _toDisplayString(_ctx.engine.checkStatus === 'light' ? 'dark' : 'light'), 1),\n            _createElementVNode(\"button\", {\n              onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_ctx.restart && _ctx.restart(...args)))\n            }, \"Restart?\")\n          ]))\n        : _createCommentVNode(\"\", true),\n      (_ctx.engine.tie)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n            _hoisted_7,\n            _createElementVNode(\"button\", {\n              onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_ctx.restart && _ctx.restart(...args)))\n            }, \"Restart?\")\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"div\", {\n      class: \"float-end\",\n      style: _normalizeStyle(`width: ${_ctx.containerWidth}px; height: ${_ctx.containerHeight}px`)\n    }, [\n      (_ctx.isMounted)\n        ? (_openBlock(), _createBlock(_component_canvas_board, {\n            key: 0,\n            \"container-height\": _ctx.containerHeight,\n            \"container-width\": _ctx.containerWidth,\n            \"current-board-representation\": _ctx.fenString,\n            \"legal-moves-for-selection\": _ctx.legalMoves,\n            onSelected: _ctx.calculateLegalMoves,\n            onDeselected: _ctx.clearLegalMoves,\n            onMove: _ctx.makeMove\n          }, null, 8, [\"container-height\", \"container-width\", \"current-board-representation\", \"legal-moves-for-selection\", \"onSelected\", \"onDeselected\", \"onMove\"]))\n        : _createCommentVNode(\"\", true)\n    ], 4)\n  ]))\n}","import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  id: \"board\",\n  ref: \"board\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, null, 512))\n}","export interface FEN {\n    piecePlacement: string,\n    activeColor: string,\n    castlingAvailability: string,\n    enPassantTargetSquare: string,\n    halfMoveClock: number,\n    fullMoveNumber: number,\n}\n\nexport function separateFEN(fen: string): FEN {\n    const [\n        piecePlacement,\n        activeColor,\n        castlingAvailability,\n        enPassantTargetSquare,\n        halfMoveClock,\n        fullMoveNumber,\n    ] = fen.split(' ');\n    return {\n        piecePlacement,\n        activeColor,\n        castlingAvailability,\n        enPassantTargetSquare,\n        halfMoveClock: Number(halfMoveClock),\n        fullMoveNumber: Number(fullMoveNumber),\n    };\n}\n\nexport function stringifyFEN(fen: FEN): string {\n    return `${fen.piecePlacement} ${fen.activeColor} ${fen.castlingAvailability} ${fen.enPassantTargetSquare} ${fen.halfMoveClock} ${fen.fullMoveNumber}`;\n}\n\nexport function convertRowToArray(row: string): string[] {\n    const positions = row.split('');\n    for (let i = 0; i < positions.length; i++) {\n        const char = positions[i].charCodeAt(0);\n        if (char > 48 && char < 58) {\n            const number = char - 48;\n            const fillArray = Array(number).fill('x');\n            positions.splice(i, 1, ...fillArray);\n        }\n    }\n    return positions;\n}\n\nexport interface BoardMap {\n    [index: string]: string,\n}\n\nexport function parsePlacementToMap(piecePlacement: string): BoardMap {\n    const map: BoardMap = {};\n    const rows = piecePlacement.split('/');\n    let rank = 8;\n    for (const row of rows) {\n        const positions = convertRowToArray(row);\n        for (let i = 0; i < positions.length; i++) {\n            const f = file[i];\n            map[`${f}-${rank}`] = positions[i];\n        }\n        rank -= 1;\n    }\n    return map;\n}\n\nexport function filterAndSortPositionsToArray(positions: string[], rank: string): string[] {\n    return positions.filter(position => position.includes(rank)).sort((a, b) => a[0].charCodeAt(0) - b[0].charCodeAt(0));\n}\n\nexport function splitBoardMapToArray(boardMap: BoardMap): string[][] {\n    const positions = Object.keys(boardMap);\n    return [\n        filterAndSortPositionsToArray(positions, '8'),\n        filterAndSortPositionsToArray(positions, '7'),\n        filterAndSortPositionsToArray(positions, '6'),\n        filterAndSortPositionsToArray(positions, '5'),\n        filterAndSortPositionsToArray(positions, '4'),\n        filterAndSortPositionsToArray(positions, '3'),\n        filterAndSortPositionsToArray(positions, '2'),\n        filterAndSortPositionsToArray(positions, '1'),\n    ];\n}\n\nexport function rebuildPlacementFromMap(boardMap: BoardMap): string {\n    let piecePlacement = '';\n    const positions = splitBoardMapToArray(boardMap);\n    for (let r = 0; r < positions.length; r++) {\n        const rank = positions[r];\n        let localAccumulator = 0;\n        for (let i = 0; i < rank.length; i++) {\n            const piece = boardMap[rank[i]];\n            if (piece === 'x') {\n                localAccumulator += 1;\n            }\n            else if (localAccumulator > 0) {\n                piecePlacement = `${piecePlacement}${localAccumulator}${piece}`;\n                localAccumulator = 0;\n            }\n            else {\n                piecePlacement = `${piecePlacement}${piece}`;\n            }\n        }\n        if (localAccumulator > 0) {\n            piecePlacement = `${piecePlacement}${localAccumulator}`;\n        }\n        if (r < positions.length - 1) {\n            piecePlacement = `${piecePlacement}/`;\n        }\n    }\n    return piecePlacement;\n}\n\nexport function shiftChar(char: string, by: number) {\n    return String.fromCharCode(char.charCodeAt(0) + by);\n}\n\nexport const rank = [8, 7, 6, 5, 4, 3, 2, 1];\nexport const file = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'];\nexport const pieceCodes = [66, 75, 78, 80, 81, 82, 98, 107, 110, 112, 113, 114];\nexport const rankAndFile = [\n    'a-1', 'a-2', 'a-3', 'a-4', 'a-5', 'a-6', 'a-7', 'a-8',\n    'b-1', 'b-2', 'b-3', 'b-4', 'b-5', 'b-6', 'b-7', 'b-8',\n    'c-1', 'c-2', 'c-3', 'c-4', 'c-5', 'c-6', 'c-7', 'c-8',\n    'd-1', 'd-2', 'd-3', 'd-4', 'd-5', 'd-6', 'd-7', 'd-8',\n    'e-1', 'e-2', 'e-3', 'e-4', 'e-5', 'e-6', 'e-7', 'e-8',\n    'f-1', 'f-2', 'f-3', 'f-4', 'f-5', 'f-6', 'f-7', 'f-8',\n    'g-1', 'g-2', 'g-3', 'g-4', 'g-5', 'g-6', 'g-7', 'g-8',\n    'h-1', 'h-2', 'h-3', 'h-4', 'h-5', 'h-6', 'h-7', 'h-8',\n];\n","import * as PIXI from 'pixi.js';\n\ninterface GlobalOffset {\n    x: number,\n    y: number,\n}\n\ntype PointerCollision = PIXI.Sprite | null;\n\nfunction calculateCollision(x: number, y: number, node: PIXI.Container, globalOffset: GlobalOffset): boolean {\n    const bX1 = node.x + globalOffset.x;\n    const bY1 = node.y + globalOffset.y;\n    const bX2 = bX1 + node.width;\n    const bY2 = bY1 + node.height;\n    return x < bX2 && x > bX1 && y < bY2 && y > bY1;\n}\n\nexport function getPointerCollision(px: number, py: number, legalSpaces: PIXI.Sprite[], globalOffset: GlobalOffset, lastCollision: null | PIXI.Sprite = null): PointerCollision {\n    if (lastCollision) {\n        if (calculateCollision(px, py, lastCollision.parent, globalOffset)) {\n            return lastCollision;\n        }\n    }\n    const filtered = legalSpaces.filter(l => Math.abs(l.parent.x + globalOffset.x - px) < l.parent.width);\n    for (const place of filtered) {\n        if (calculateCollision(px, py, place.parent, globalOffset)) {\n            return place;\n        }\n    }\n    return null;\n}\n\nexport function isColliding(dragNode: PIXI.Sprite, legalSpaces: PIXI.Sprite[], globalOffset: { x: number, y: number }): PIXI.Sprite[] {\n    const collisions = [];\n    const aX = dragNode.x - (dragNode.width);\n    const aY = dragNode.y - (dragNode.height);\n    const aX2 = aX + dragNode.width;\n    const aY2 = aY + dragNode.height;\n    for (const place of legalSpaces) {\n        // Use parent node because \"place\" inherits position from parent\n        const parent = place.parent;\n        const bX1 = parent.x - (parent.width / 2) + globalOffset.x;\n        const bY1 = parent.y - (parent.height / 2) + globalOffset.y;\n        const bX2 = bX1 + parent.width;\n        const bY2 = bY1 + parent.height;\n        if (aX < bX2 && aX2 > bX1 && aY < bY2 && aY2 > bY1) {\n            collisions.push(place);\n        }\n    }\n    return collisions;\n}\n\nexport function getNearestCollision(collisions: PIXI.Sprite[], cX: number, cY: number, globalOffset: { x: number, y: number }): PIXI.Sprite {\n    collisions.sort((a, b) => {\n        const aCenter = {\n            x: a.parent.x + globalOffset.x + (a.parent.width / 2),\n            y: a.parent.y + globalOffset.y + (a.parent.height / 2),\n        };\n        const bCenter = {\n            x: b.parent.x + globalOffset.x + (b.parent.width / 2),\n            y: b.parent.y + globalOffset.y + (b.parent.height / 2),\n        };\n        const aDelta = {\n            x: Math.abs(cX - aCenter.x),\n            y: Math.abs(cY - aCenter.y),\n        };\n        const aHypotenuse = Math.hypot(aDelta.x, aDelta.y);\n        const bDelta = {\n            x: Math.abs(cX - bCenter.x),\n            y: Math.abs(cY - bCenter.y),\n        };\n        const bHypotenuse = Math.hypot(bDelta.x, bDelta.y);\n        return aHypotenuse - bHypotenuse;\n    });\n    return collisions[0];\n}\n","\nimport { defineComponent, PropType } from 'vue';\nimport * as PIXI from 'pixi.js';\nimport { separateFEN, parsePlacementToMap, rank, file } from '@/utils/utils';\nimport { ICanvasBoard, BoardConfig, LegalMovesForSelection } from '@/board/BoardUtils';\nimport { getPointerCollision } from '@/board/Collision';\n\nexport default defineComponent({\n    name: 'CanvasBoard',\n    emits: ['selected', 'deselected', 'move'],\n    props: {\n        currentBoardRepresentation: {\n            type: String,\n            default: 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1',\n        },\n        containerHeight: {\n            type: Number,\n            default: 100,\n        },\n        containerWidth: {\n            type: Number,\n            default: 100,\n        },\n        boardConfig: {\n            type: Object as PropType<BoardConfig>,\n        },\n        legalMovesForSelection: {\n            type: Array as PropType<LegalMovesForSelection>,\n            default: () => [],\n        },\n    },\n    data(): ICanvasBoard {\n        return {\n            app: new PIXI.Application(),\n            containerLength: 0,\n            squareLength: 0,\n            boardContainer: new PIXI.Container(),\n            pieces: {},\n            textures: {},\n            svgs: {},\n            squareMap: {},\n            boardMap: {},\n            fen: {\n                piecePlacement: '',\n                activeColor: '',\n                castlingAvailability: '',\n                enPassantTargetSquare: '',\n                halfMoveClock: 0,\n                fullMoveNumber: 0,\n            },\n            dark: 0xb58863,\n            light: 0xf0d9b5,\n            drag: {\n                dragData: null,\n                dragNode: null,\n                tempContainer: new PIXI.Container(),\n                originalParent: null,\n            },\n            highlight: {\n                originalPlace: null,\n                closestTarget: null,\n                legalTargets: [],\n            },\n            placedPieces: [],\n            freeSpaces: [],\n            globalOffset: {\n                x: 0,\n                y: 0,\n            },\n            cachedCollision: null,\n        };\n    },\n    watch: {\n        currentBoardRepresentation() {\n            this.updateFEN(this.currentBoardRepresentation);\n        },\n        legalMovesForSelection: {\n            deep: true,\n            handler() {\n                this.highlightLegalMoves();\n            },\n        },\n    },\n    mounted() {\n        this.applyConfig();\n        // @ts-ignore TS2322\n        const element: HTMLDivElement = this.$refs.board;\n        element.style.width = this.containerWidth + 'px';\n        element.style.height = this.containerHeight + 'px';\n        this.app = new PIXI.Application({\n            antialias: true,\n            resolution: window.devicePixelRatio,\n            backgroundAlpha: 0,\n            resizeTo: element,\n        });\n        this.calculateContainerLength();\n        this.calculateSquareLength();\n        this.loadSVGs();\n        this.loadTextures();\n        const container = new PIXI.Container();\n        container.interactive = true;\n        container.on('pointermove', this.onDragMove);\n        this.app.stage.addChild(container);\n        this.boardContainer = container;\n        element.appendChild(this.app.view);\n        this.drawBoard();\n        this.updateFEN(this.currentBoardRepresentation);\n        // @ts-ignore TS2345\n        this.app.stage.addChild(this.drag.tempContainer);\n        container.x = this.app.screen.width / 2;\n        container.y = this.app.screen.height / 2;\n        container.pivot.x = container.width / 2.28;\n        container.pivot.y = container.height / 2.28;\n        this.calculateGlobalOffset();\n    },\n    beforeUnmount() {\n        this.app.destroy();\n    },\n    methods: {\n        calculateGlobalOffset(): void {\n            this.globalOffset.x = this.boardContainer.x - (this.boardContainer.width / 2);\n            this.globalOffset.y = this.boardContainer.y - (this.boardContainer.height / 2);\n        },\n        applyConfig(): void {\n            if (this.boardConfig) {\n                if (this.boardConfig.light) {\n                    this.light = this.boardConfig.light;\n                }\n                if (this.boardConfig.dark) {\n                    this.dark = this.boardConfig.dark;\n                }\n            }\n        },\n        drawBoard(): void {\n            for (let y = 0; y < rank.length; y++) {\n                for (let x = 0; x < file.length; x++) {\n                    const id = `${file[x]}-${rank[y]}`;\n                    const startX = x * this.squareLength;\n                    const startY = y * this.squareLength;\n                    const color = this.getColorForSquare(file[x], rank[y]);\n                    this.squareMap[id] = this.drawSquare(startX, startY, color);\n                    this.squareMap[id].name = id;\n                }\n            }\n        },\n        getColorForSquare(rank: string, row: number): number {\n            const charCode = rank.charCodeAt(0);\n            if (charCode % 2 !== 0) {\n                return row % 2 === 0 ? this.light : this.dark;\n            }\n            return row % 2 === 0 ? this.dark : this.light;\n        },\n        loadSVGs(): void {\n            this.svgs.B = new PIXI.SVGResource(require('../assets/pieces/66.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.K = new PIXI.SVGResource(require('../assets/pieces/75.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.N = new PIXI.SVGResource(require('../assets/pieces/78.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.P = new PIXI.SVGResource(require('../assets/pieces/80.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.Q = new PIXI.SVGResource(require('../assets/pieces/81.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.R = new PIXI.SVGResource(require('../assets/pieces/82.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.b = new PIXI.SVGResource(require('../assets/pieces/98.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.k = new PIXI.SVGResource(require('../assets/pieces/107.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.n = new PIXI.SVGResource(require('../assets/pieces/110.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.p = new PIXI.SVGResource(require('../assets/pieces/112.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.q = new PIXI.SVGResource(require('../assets/pieces/113.svg'), { width: this.squareLength, height: this.squareLength });\n            this.svgs.r = new PIXI.SVGResource(require('../assets/pieces/114.svg'), { width: this.squareLength, height: this.squareLength });\n        },\n        loadTextures(): void {\n            // @ts-ignore TS2345\n            this.textures.B = PIXI.Texture.from(this.svgs.B);\n            // @ts-ignore TS2345\n            this.textures.K = PIXI.Texture.from(this.svgs.K);\n            // @ts-ignore TS2345\n            this.textures.N = PIXI.Texture.from(this.svgs.N);\n            // @ts-ignore TS2345\n            this.textures.P = PIXI.Texture.from(this.svgs.P);\n            // @ts-ignore TS2345\n            this.textures.Q = PIXI.Texture.from(this.svgs.Q);\n            // @ts-ignore TS2345\n            this.textures.R = PIXI.Texture.from(this.svgs.R);\n            // @ts-ignore TS2345\n            this.textures.b = PIXI.Texture.from(this.svgs.b);\n            // @ts-ignore TS2345\n            this.textures.k = PIXI.Texture.from(this.svgs.k);\n            // @ts-ignore TS2345\n            this.textures.n = PIXI.Texture.from(this.svgs.n);\n            // @ts-ignore TS2345\n            this.textures.p = PIXI.Texture.from(this.svgs.p);\n            // @ts-ignore TS2345\n            this.textures.q = PIXI.Texture.from(this.svgs.q);\n            // @ts-ignore TS2345\n            this.textures.r = PIXI.Texture.from(this.svgs.r);\n        },\n        updateFEN(fen: string): void {\n            this.fen = separateFEN(fen);\n            this.boardMap = parsePlacementToMap(this.fen.piecePlacement);\n            this.clearPieces();\n            this.placePieces();\n        },\n        findFreeSpaces(): void {\n            const boardArray = Object.keys(this.boardMap);\n            const filtered = [];\n            for (const place of boardArray) {\n                if (this.boardMap[place] === 'x') {\n                    filtered.push(this.squareMap[place]);\n                }\n            }\n            this.freeSpaces = filtered;\n        },\n        isPieceInteractive(piece: string): boolean {\n            return (this.fen.activeColor === 'w' && piece.charCodeAt(0) < 97) ||\n                (this.fen.activeColor === 'b' && piece.charCodeAt(0) > 97);\n        },\n        clearPieces(): void {\n            for (let i = this.placedPieces.length - 1; i >= 0; i--) {\n                const piece = this.placedPieces.pop();\n                if (piece) {\n                    piece.destroy();\n                }\n            }\n        },\n        placePieces(): void {\n            for (const place of Object.keys(this.boardMap)) {\n                const piece = this.boardMap[place];\n                if (piece !== 'x') {\n                    const texture = this.textures[piece];\n                    // @ts-ignore: TS2345\n                    const sprite = new PIXI.Sprite(texture);\n                    if (this.isPieceInteractive(piece)) {\n                        sprite.interactive = true;\n                        sprite.buttonMode = true;\n                        sprite.on('pointerdown', this.onDragStart)\n                            .on('pointerup', this.onDragEnd)\n                            .on('pointerupoutside', this.onDragEnd);\n                    }\n                    sprite.anchor.set(0.5);\n                    sprite.name = piece;\n                    const boardSquare = this.squareMap[place];\n                    boardSquare.addChild(sprite);\n                    this.placedPieces.push(sprite);\n                }\n                else {\n                    const sprite = new PIXI.Sprite();\n                    sprite.interactive = true;\n                    sprite.anchor.set(0.5);\n                    sprite.width = this.squareLength;\n                    sprite.height = this.squareLength;\n                    sprite.alpha = 0;\n                    const boardSquare = this.squareMap[place];\n                    boardSquare.addChild(sprite);\n                    this.placedPieces.push(sprite);\n                }\n            }\n        },\n        drawSquare(x: number, y: number, color: number): PIXI.Container {\n            const squareContainer = new PIXI.Container();\n            squareContainer.position.set(x, y);\n            if (this.app) {\n                const square = new PIXI.Graphics();\n                square.beginFill(color);\n                square.drawRect(0, 0, this.squareLength, this.squareLength);\n                square.endFill();\n                square.pivot.x = square.width / 2;\n                square.pivot.y = square.height / 2;\n                squareContainer.addChild(square);\n                this.boardContainer.addChild(squareContainer);\n            }\n            return squareContainer;\n        },\n        onDragStart(event: PIXI.InteractionEvent): void {\n            this.drag.dragData = event.data;\n            // @ts-ignore TS2740\n            this.drag.dragNode = event.currentTarget;\n            // @ts-ignore TS2322\n            this.drag.originalParent = this.drag.dragNode?.parent;\n            this.highlight.originalPlace = this.createHighlight(0xffffff);\n            // @ts-ignore TS2339\n            this.drag.originalParent.addChild(this.highlight.originalPlace);\n            const selected = event.currentTarget;\n            const piece = selected.name;\n            const place = selected.parent.name;\n            this.$emit('selected', { piece, place });\n            // @ts-ignore TS2531\n            this.drag.dragNode.alpha = 0.5;\n            // @ts-ignore TS2345\n            this.drag.dragNode.setParent(this.drag.tempContainer);\n            this.onDragMove();\n        },\n        createHighlight(color: number): PIXI.Graphics {\n            const highlight = new PIXI.Graphics();\n            highlight.beginFill(color);\n            highlight.drawRect(0, 0, this.squareLength, this.squareLength);\n            highlight.endFill();\n            highlight.pivot.x = highlight.width / 2;\n            highlight.pivot.y = highlight.height / 2;\n            highlight.beginHole();\n            highlight.drawRect(this.squareLength / 20, this.squareLength / 20, this.squareLength - (this.squareLength / 10), this.squareLength - (this.squareLength / 10));\n            highlight.endHole();\n            return highlight;\n        },\n        onDragEnd(): void {\n            if (this.drag.dragNode) {\n                this.drag.dragNode.alpha = 1;\n                if (this.highlight.closestTarget) {\n                    const movePayload = {\n                        to: this.highlight.closestTarget.parent.name,\n                        from: this.highlight.originalPlace?.parent.name,\n                        piece: this.drag.dragNode.name,\n                    };\n                    this.$emit('move', movePayload);\n                    console.log(movePayload);\n                }\n                // @ts-ignore TS2345\n                this.drag.dragNode.setParent(this.drag.originalParent);\n                this.drag.dragNode.x = 0;\n                this.drag.dragNode.y = 0;\n            }\n            if (this.highlight.originalPlace) {\n                this.highlight.originalPlace.destroy();\n            }\n            if (this.highlight.closestTarget) {\n                this.highlight.closestTarget.destroy();\n            }\n            this.clearDrag();\n            this.clearHighlight();\n            this.$emit('deselected', true);\n        },\n        onDragMove(): void {\n            if (this.drag.dragNode) {\n                // @ts-ignore TS2345\n                const newPosition = this.drag.dragData.getLocalPosition(this.drag.dragNode.parent);\n                if (newPosition.x > this.containerWidth) {\n                    this.drag.dragNode.x = this.containerWidth;\n                }\n                else if (newPosition.x < 0) {\n                    this.drag.dragNode.x = 0;\n                }\n                else {\n                    this.drag.dragNode.x = newPosition.x;\n                }\n                if (newPosition.y > this.containerHeight) {\n                    this.drag.dragNode.y = this.containerHeight;\n                }\n                else if (newPosition.y < 0) {\n                    this.drag.dragNode.y = 0;\n                }\n                else {\n                    this.drag.dragNode.y = newPosition.y;\n                }\n                this.clearCollision();\n                // Check which position mouse is closest to\n                // @ts-ignore TS2345\n                const collision = getPointerCollision(newPosition.x, newPosition.y, this.highlight.legalTargets, this.globalOffset);\n                this.cachedCollision = collision;\n                if (collision) {\n                    const highlight = this.createHighlight(0x0000ff);\n                    // @ts-ignore TS2345\n                    collision.parent.addChild(highlight);\n                    // @ts-ignore TS2740\n                    this.highlight.closestTarget = highlight;\n                }\n            }\n        },\n        clearDrag(): void {\n            this.drag.dragNode = null;\n            this.drag.dragData = null;\n            this.drag.originalParent = null;\n        },\n        clearHighlight(): void {\n            this.highlight.originalPlace = null;\n            this.highlight.closestTarget = null;\n            this.clearLegalMoves();\n            this.clearCollision();\n        },\n        highlightLegalMoves(): void {\n            for (const move of this.legalMovesForSelection) {\n                const square = this.squareMap[move];\n                const highlight = this.createHighlight(0x00ff00);\n                square.addChild(highlight);\n                this.highlight.legalTargets.push(highlight);\n            }\n        },\n        clearLegalMoves(): void {\n            for (let i = this.highlight.legalTargets.length - 1; i >= 0; i--) {\n                const node = this.highlight.legalTargets[i];\n                node.destroy();\n                this.highlight.legalTargets.pop();\n            }\n        },\n        clearCollision(): void {\n            if (this.highlight.closestTarget) {\n                this.highlight.closestTarget.destroy();\n                this.highlight.closestTarget = null;\n            }\n        },\n        calculateContainerLength(): void {\n            this.containerLength = this.parentWidth() > this.parentHeight() ? this.parentHeight() : this.parentWidth();\n        },\n        parentWidth(): number {\n            return this.app ? this.app.view.width : 0;\n        },\n        parentHeight(): number {\n            return this.app ? this.app.view.height : 0;\n        },\n        calculateSquareLength(): void {\n            this.squareLength = this.containerLength / rank.length;\n        },\n    },\n});\n","import { render } from \"./CanvasBoard.vue?vue&type=template&id=f182caec&ts=true\"\nimport script from \"./CanvasBoard.vue?vue&type=script&lang=ts\"\nexport * from \"./CanvasBoard.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { BoardMap, FEN, shiftChar } from '../../utils/utils';\n\nexport type Color = 'light' | 'dark';\n\nexport type MoveType = 'consecutive' | 'jump';\n\nexport interface DefendPiece {\n    code: string,\n    position: string,\n}\n\nexport abstract class Piece {\n    name: string;\n    code: string;\n    color: Color;\n    position: string;\n    lastPosition: string | null;\n    rank: number;\n    file: string;\n    legalMoves: string[] | null = null;\n    moveType: MoveType;\n    defending: DefendPiece[] = [];\n\n    protected constructor(color: Color, position: string, name: string, moveType: MoveType) {\n        this.color = color;\n        this.position = position;\n        this.lastPosition = null;\n        this.name = name;\n        this.code = this.parseCode();\n        const [file, rank] = position.split('-');\n        this.rank = Number(rank);\n        this.file = file;\n        this.moveType = moveType;\n    }\n\n    public move(position: string): void {\n        this.lastPosition = this.position;\n        this.position = position;\n        const [file, rank] = position.split('-');\n        this.rank = Number(rank);\n        this.file = file;\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        return [];\n    }\n\n    // Filters valid moves based on if the space exists and if the piece is either x or an enemy piece\n    protected filterValidMoves(moves: string[], currentBoard: BoardMap): string[] {\n        return moves.filter(move => this.isValidMovePosition(move, currentBoard));\n    }\n\n    protected isValidMovePosition(move: string, currentBoard: BoardMap): boolean {\n        const lowerRangeEnemyCodes = this.color === 'dark' ? 65 : 97;\n        const upperRangeEnemyCodes = this.color === 'dark' ? 90 : 122;\n        const lowerRangeAllyCodes = this.color === 'dark' ? 97 : 65;\n        const upperRangeAllyCodes = this.color === 'dark' ? 122 : 90;\n        if (currentBoard[move]) {\n            const moveCharCode = currentBoard[move].charCodeAt(0);\n            if (currentBoard[move] === 'x') {\n                return true;\n            }\n            else if (moveCharCode >= lowerRangeAllyCodes && moveCharCode <= upperRangeAllyCodes) {\n                this.defending.push({ code: currentBoard[move], position: move });\n            }\n            return !!currentBoard[move] && currentBoard[move].charCodeAt(0) >= lowerRangeEnemyCodes && currentBoard[move].charCodeAt(0) <= upperRangeEnemyCodes;\n        }\n        return false;\n    }\n\n    protected isMoveCapture(move: string, currentBoard: BoardMap): boolean {\n        const lowerRangeEnemyCodes = this.color === 'dark' ? 65 : 97;\n        const upperRangeEnemyCodes = this.color === 'dark' ? 90 : 122;\n        if (currentBoard[move] === 'x') {\n            return false;\n        }\n        return !!currentBoard[move] && currentBoard[move].charCodeAt(0) >= lowerRangeEnemyCodes && currentBoard[move].charCodeAt(0) <= upperRangeEnemyCodes;\n    }\n\n    protected isOppositeColor(pieceCode: string): boolean {\n        const charCode = pieceCode.charCodeAt(0);\n        if (this.color === 'dark') {\n            return charCode <= 90;\n        }\n        return charCode >= 97;\n    }\n\n    protected consecutiveMoveSearch(currentBoard: BoardMap, straight: boolean, diagonal: boolean): string[] {\n        const moveArray: string[] = [];\n        let lookUpLeft = false;\n        let lookUp = false;\n        let lookUpRight = false;\n        let lookDownRight = false;\n        let lookDown = false;\n        let lookDownLeft = false;\n        let lookLeft = false;\n        let lookRight = false;\n        if (straight) {\n            lookUp = true;\n            lookDown = true;\n            lookLeft = true;\n            lookRight = true;\n        }\n        if (diagonal) {\n            lookUpLeft = true;\n            lookUpRight = true;\n            lookDownRight = true;\n            lookDownLeft = true;\n        }\n        // Look up\n        for (let i = this.rank + 1; i <= 8; i++) {\n            if (!lookUpLeft && !lookUpRight && !lookUp) {\n                break;\n            }\n            if (lookUp) {\n                const newPosition = `${this.file}-${i}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        lookUp = false;\n                    }\n                }\n                else {\n                    lookUp = false;\n                }\n            }\n            if (lookUpRight) {\n                const move = `${shiftChar(this.file, i - this.rank)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookUpRight = false;\n                    }\n                }\n                else {\n                    lookUpRight = false;\n                }\n            }\n            if (lookUpLeft) {\n                const move = `${shiftChar(this.file, (i - this.rank) * -1)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookUpLeft = false;\n                    }\n                }\n                else {\n                    lookUpLeft = false;\n                }\n            }\n        }\n        // Look down\n        for (let i = this.rank - 1; i >= 1; i--) {\n            if (!lookDownLeft && !lookDownRight && !lookDown) {\n                break;\n            }\n            if (lookDown) {\n                const newPosition = `${this.file}-${i}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        lookDown = false;\n                    }\n                }\n                else {\n                    lookDown = false;\n                }\n            }\n            if (lookDownRight) {\n                const move = `${shiftChar(this.file, i - this.rank)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookDownRight = false;\n                    }\n                }\n                else {\n                    lookDownRight = false;\n                }\n            }\n            if (lookDownLeft) {\n                const move = `${shiftChar(this.file, (i - this.rank) * -1)}-${i}`;\n                if (this.isValidMovePosition(move, currentBoard)) {\n                    moveArray.push(move);\n                    if (this.isMoveCapture(move, currentBoard)) {\n                        lookDownLeft = false;\n                    }\n                }\n                else {\n                    lookDownLeft = false;\n                }\n            }\n        }\n        const fileNumber = this.file.charCodeAt(0);\n        const fileLowerBound = 97;\n        const fileUpperBound = 104;\n        if (lookLeft) {\n            for (let i = fileNumber - 1; i >= fileLowerBound; i--) {\n                const newPosition = `${String.fromCharCode(i)}-${this.rank}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        break;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        if (lookRight) {\n            for (let i = fileNumber + 1; i <= fileUpperBound; i++) {\n                const newPosition = `${String.fromCharCode(i)}-${this.rank}`;\n                if (this.isValidMovePosition(newPosition, currentBoard)) {\n                    moveArray.push(newPosition);\n                    if (this.isMoveCapture(newPosition, currentBoard)) {\n                        break;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return moveArray;\n    }\n\n    public resetLegalMoves(): void {\n        this.legalMoves = null;\n        this.defending.length = 0;\n    }\n\n    private parseCode(): string {\n        if (this.name === 'Knight') {\n            return this.color === 'dark' ? this.name[1].toLowerCase() : this.name[1].toUpperCase();\n        }\n        return this.color === 'dark' ? this.name[0].toLowerCase() : this.name[0].toUpperCase();\n    }\n}\n","import { BoardMap, FEN, shiftChar } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Pawn extends Piece {\n    inStartingPosition: boolean;\n    direction: number;\n\n    constructor(color: Color, position: string) {\n        super(color, position, 'Pawn', 'consecutive');\n        this.direction = this.color === 'dark' ? -1 : 1;\n        this.inStartingPosition = (this.rank === 7 && this.color === 'dark') || (this.rank === 2 && this.color === 'light');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            const moves = [];\n            const newRank = this.rank + this.direction;\n            const move1 = `${this.file}-${newRank}`;\n            if ((newRank <= 8 || newRank >= 1) && currentBoard[move1] === 'x') {\n                moves.push(move1);\n                if (this.inStartingPosition) {\n                    const move2 = `${this.file}-${this.rank + (2 * this.direction)}`;\n                    if (currentBoard[move2] === 'x') {\n                        moves.push(move2);\n                    }\n                }\n            }\n            const leftFile = shiftChar(this.file, -1);\n            const rightFile = shiftChar(this.file, 1);\n            const possibleEPSquares = [`${leftFile}-${newRank}`, `${rightFile}-${newRank}`];\n            for (const possibleSquare of possibleEPSquares) {\n                const enPassantCheck = possibleSquare[0] + possibleSquare[2];\n                if (enPassantCheck === fen.enPassantTargetSquare || (currentBoard[possibleSquare] && currentBoard[possibleSquare] !== 'x' && this.isOppositeColor(currentBoard[possibleSquare]))) {\n                    moves.push(`${possibleSquare}`);\n                }\n            }\n            this.legalMoves = moves;\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN, shiftChar } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Knight extends Piece {\n    constructor(color: Color, position: string) {\n        super(color, position, 'Knight', 'jump');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = [];\n            // rank + 2\n            this.legalMoves.push(`${shiftChar(this.file, 1)}-${this.rank + 2}`);\n            this.legalMoves.push(`${shiftChar(this.file, -1)}-${this.rank + 2}`);\n            // rank + 1\n            this.legalMoves.push(`${shiftChar(this.file, 2)}-${this.rank + 1}`);\n            this.legalMoves.push(`${shiftChar(this.file, -2)}-${this.rank + 1}`);\n            // rank - 1\n            this.legalMoves.push(`${shiftChar(this.file, 2)}-${this.rank - 1}`);\n            this.legalMoves.push(`${shiftChar(this.file, -2)}-${this.rank - 1}`);\n            // rank - 2\n            this.legalMoves.push(`${shiftChar(this.file, 1)}-${this.rank - 2}`);\n            this.legalMoves.push(`${shiftChar(this.file, -1)}-${this.rank - 2}`);\n            this.legalMoves = this.filterValidMoves(this.legalMoves, currentBoard);\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN, shiftChar, rankAndFile } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\ninterface CheckStatus {\n    check: boolean,\n    piece: string | null,\n}\n\nexport default class King extends Piece {\n    canCastleShort: boolean;\n    canCastleLong: boolean;\n    isInCheck = false;\n    checkBy: string | null = null;\n\n    constructor(color: Color, position: string, castlingAvailability: string) {\n        super(color, position, 'King', 'consecutive');\n        this.canCastleShort = (castlingAvailability.includes('K') && color === 'light') ||\n            (castlingAvailability.includes('k') && color === 'dark');\n        this.canCastleLong = (castlingAvailability.includes('Q') && color === 'light') ||\n            (castlingAvailability.includes('q') && color === 'dark');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = [];\n            let moves = [];\n            // Up\n            moves.push(`${shiftChar(this.file, -1)}-${this.rank + 1}`);\n            moves.push(`${this.file}-${this.rank + 1}`);\n            moves.push(`${shiftChar(this.file, 1)}-${this.rank + 1}`);\n            // Down\n            moves.push(`${shiftChar(this.file, -1)}-${this.rank - 1}`);\n            moves.push(`${this.file}-${this.rank - 1}`);\n            moves.push(`${shiftChar(this.file, 1)}-${this.rank - 1}`);\n            // Left\n            moves.push(`${shiftChar(this.file, -1)}-${this.rank}`);\n            // Right\n            moves.push(`${shiftChar(this.file, 1)}-${this.rank}`);\n            moves = this.filterValidMoves(moves, currentBoard);\n            for (const move of moves) {\n                if (this.checkCastlingForAttackers([move], currentBoard) === 1) {\n                    this.legalMoves.push(move);\n                }\n            }\n            if (this.canCastleShort && this.canPerformCastleShort(currentBoard)) {\n                const checkPositions = [`${shiftChar(this.file, 1)}-${this.rank}`, `${shiftChar(this.file, 2)}-${this.rank}`];\n                const good = this.checkCastlingForAttackers(checkPositions, currentBoard);\n                if (good === 2) {\n                    const castleShortPosition = this.color === 'light' ? 'g-1' : 'g-8';\n                    this.legalMoves.push(castleShortPosition);\n                }\n            }\n            if (this.canCastleLong && this.canPerformCastleLong(currentBoard)) {\n                const checkPositions = [`${shiftChar(this.file, -1)}-${this.rank}`, `${shiftChar(this.file, -2)}-${this.rank}`];\n                const good = this.checkCastlingForAttackers(checkPositions, currentBoard);\n                if (good === 2) {\n                    const castleLongPosition = this.color === 'light' ? 'c-1' : 'c-8';\n                    this.legalMoves.push(castleLongPosition);\n                }\n            }\n        }\n        return this.legalMoves;\n    }\n\n    public checkCastlingForAttackers(positions: string[], currentBoard: BoardMap): number {\n        const currentCheckStatus = this.checkBy;\n        const currentInCheck = this.isInCheck;\n        const currentPosition = this.position;\n        const currentRank = this.rank;\n        const currentFile = this.file;\n        let good = 0;\n        for (const pos of positions) {\n            const boardCopy = JSON.parse(JSON.stringify(currentBoard));\n            boardCopy[this.position] = 'x';\n            boardCopy[pos] = this.code;\n            this.position = pos;\n            this.rank = Number(pos[2]);\n            this.file = pos[0];\n            const checkStatus = this.getCheckStatus(boardCopy);\n            if (!checkStatus.check) {\n                good += 1;\n            }\n            this.checkBy = currentCheckStatus;\n            this.isInCheck = currentInCheck;\n        }\n        this.position = currentPosition;\n        this.rank = currentRank;\n        this.file = currentFile;\n        return good;\n    }\n\n    public canPerformCastleShort(currentBoard: BoardMap): boolean {\n        return currentBoard[`${shiftChar(this.file, 1)}-${this.rank}`] === 'x' && currentBoard[`${shiftChar(this.file, 2)}-${this.rank}`] === 'x';\n    }\n\n    public canPerformCastleLong(currentBoard: BoardMap): boolean {\n        return currentBoard[`${shiftChar(this.file, -1)}-${this.rank}`] === 'x' && currentBoard[`${shiftChar(this.file, -2)}-${this.rank}`] === 'x' && currentBoard[`${shiftChar(this.file, -3)}-${this.rank}`] === 'x';\n    }\n\n    public findAttackersFromPositions(positions: string[], boardMap: BoardMap, attackingPieceCode: string): boolean {\n        positions = positions.filter((position) => rankAndFile.includes(position));\n        const attackers = positions.filter((position) => boardMap[position] === attackingPieceCode);\n        // Theoretically there can only be one attacker at a time\n        if (attackers.length > 0) {\n            this.isInCheck = true;\n            this.checkBy = attackers[0];\n            return true;\n        }\n        return false;\n    }\n\n    public checkDirection(currentBoard: BoardMap, position: string, piece1: string, piece2: string): boolean {\n        if (rankAndFile.includes(position)) {\n            if (currentBoard[position] === 'x') {\n                return true;\n            }\n            else if (currentBoard[position] === piece1 || currentBoard[position] === piece2) {\n                this.isInCheck = true;\n                this.checkBy = position;\n                return false;\n            }\n        }\n        return false;\n    }\n\n    public getCheckStatus(currentBoard: BoardMap): CheckStatus {\n        this.isInCheck = false;\n        this.checkBy = null;\n        let direction: number;\n        let aKnight: string;\n        let aPawn: string;\n        let aQueen: string;\n        let aRook: string;\n        let aBishop: string;\n        if (this.color === 'light') {\n            direction = 1;\n            aKnight = 'n';\n            aPawn = 'p';\n            aQueen = 'q';\n            aRook = 'r';\n            aBishop = 'b';\n        }\n        else {\n            direction = -1;\n            aKnight = 'N';\n            aPawn = 'P';\n            aQueen = 'Q';\n            aRook = 'R';\n            aBishop = 'B';\n        }\n        // Check for attacking knights\n        const possibleKnightPositions = [\n            `${shiftChar(this.file, 1)}-${this.rank + 2}`,\n            `${shiftChar(this.file, -1)}-${this.rank + 2}`,\n            `${shiftChar(this.file, 2)}-${this.rank + 1}`,\n            `${shiftChar(this.file, -2)}-${this.rank + 1}`,\n            `${shiftChar(this.file, 2)}-${this.rank - 1}`,\n            `${shiftChar(this.file, -2)}-${this.rank - 1}`,\n            `${shiftChar(this.file, 1)}-${this.rank - 2}`,\n            `${shiftChar(this.file, -1)}-${this.rank - 2}`,\n        ];\n        // If no attacking knights\n        if (!this.findAttackersFromPositions(possibleKnightPositions, currentBoard, aKnight)) {\n            // Check for attacking pawn\n            const possiblePawnPositions = [\n                `${shiftChar(this.file, 1)}-${this.rank + direction}`,\n                `${shiftChar(this.file, -1)}-${this.rank + direction}`,\n            ];\n            // If no attacking pawns\n            if (!this.findAttackersFromPositions(possiblePawnPositions, currentBoard, aPawn)) {\n                let up = true;\n                let down = true;\n                let left = true;\n                let right = true;\n                let upLeft = true;\n                let upRight = true;\n                let downLeft = true;\n                let downRight = true;\n                for (let i = 1; i <= 8; i++) {\n                    if (up) {\n                        const newPosition = `${this.file}-${this.rank + i}`;\n                        up = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (down) {\n                        const newPosition = `${this.file}-${this.rank - i}`;\n                        down = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (left) {\n                        const newPosition = `${shiftChar(this.file, -i)}-${this.rank}`;\n                        left = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (right) {\n                        const newPosition = `${shiftChar(this.file, i)}-${this.rank}`;\n                        right = this.checkDirection(currentBoard, newPosition, aQueen, aRook);\n                    }\n                    if (upLeft) {\n                        const newPosition = `${shiftChar(this.file, -i)}-${this.rank + i}`;\n                        upLeft = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if (upRight) {\n                        const newPosition = `${shiftChar(this.file, i)}-${this.rank + i}`;\n                        upRight = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if (downLeft) {\n                        const newPosition = `${shiftChar(this.file, -i)}-${this.rank - i}`;\n                        downLeft = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if (downRight) {\n                        const newPosition = `${shiftChar(this.file, i)}-${this.rank - i}`;\n                        downRight = this.checkDirection(currentBoard, newPosition, aQueen, aBishop);\n                    }\n                    if ((!up && !down && !left && !right && !upLeft && !upRight && !downLeft && !downRight) || (this.isInCheck)) {\n                        break;\n                    }\n                }\n            }\n        }\n\n        return { check: this.isInCheck, piece: this.checkBy };\n    }\n}\n","import { BoardMap, FEN } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Queen extends Piece {\n    constructor(color: Color, position: string) {\n        super(color, position, 'Queen', 'consecutive');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = this.consecutiveMoveSearch(currentBoard, true, true);\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Bishop extends Piece {\n    constructor(color: Color, position: string) {\n        super(color, position, 'Bishop', 'consecutive');\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = this.consecutiveMoveSearch(currentBoard, false, true);\n        }\n        return this.legalMoves;\n    }\n}\n","import { BoardMap, FEN } from '../../utils/utils';\nimport { Color, Piece } from './Piece';\n\nexport default class Rook extends Piece {\n    canCastle: boolean;\n    castleSide: string;\n\n    constructor(color: Color, position: string, castlingAvailability: string) {\n        super(color, position, 'Rook', 'consecutive');\n        if (castlingAvailability.includes('q') && position === 'a-8' && this.color === 'dark') {\n            this.canCastle = true;\n            this.castleSide = 'q';\n        }\n        else if (castlingAvailability.includes('k') && position === 'h-8' && this.color === 'dark') {\n            this.canCastle = true;\n            this.castleSide = 'k';\n        }\n        else if (castlingAvailability.includes('Q') && position === 'a-1' && this.color === 'light') {\n            this.canCastle = true;\n            this.castleSide = 'Q';\n        }\n        else if (castlingAvailability.includes('K') && position === 'h-1' && this.color === 'light') {\n            this.canCastle = true;\n            this.castleSide = 'K';\n        }\n        else {\n            this.canCastle = false;\n            this.castleSide = '-';\n        }\n    }\n\n    public getLegalMoves(currentBoard: BoardMap, fen: FEN): string[] {\n        if (!this.legalMoves) {\n            this.legalMoves = this.consecutiveMoveSearch(currentBoard, true, false);\n        }\n        return this.legalMoves;\n    }\n}\n","import Pawn from './pieces/Pawn';\nimport Knight from './pieces/Knight';\nimport King from './pieces/King';\nimport Queen from './pieces/Queen';\nimport Bishop from './pieces/Bishop';\nimport Rook from './pieces/Rook';\nimport { Color, Piece } from './pieces/Piece';\nimport { BoardMap, FEN, parsePlacementToMap, rebuildPlacementFromMap, separateFEN, shiftChar, stringifyFEN } from '../utils/utils';\n\n// PieceMap indexes based on position of Piece on board\ninterface PieceMap {\n    [index: string]: Piece,\n}\n\ninterface Kings {\n    k: King,\n    K: King,\n}\n\ninterface ParsedPieces {\n    piecesByLocation: PieceMap,\n    kings: Kings,\n}\n\ninterface PiecesByColor {\n    light: Piece[],\n    dark: Piece[],\n}\n\ntype CheckStatus = 'light' | 'dark' | 'none';\n\nexport class Chess {\n    fen: FEN;\n    boardMap: BoardMap;\n    piecesByLocation: PieceMap; // this tracks pieces by position\n    kings: Kings;\n    piecesByColor: PiecesByColor = { light: [], dark: [] };\n    checkStatus: CheckStatus = 'none';\n    checkMateStatus: boolean = false;\n    tie: boolean = false;\n\n    constructor(fen: string = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1') {\n        this.fen = separateFEN(fen);\n        this.boardMap = parsePlacementToMap(this.fen.piecePlacement);\n        const { piecesByLocation, kings } = this.parsePieces();\n        this.piecesByLocation = piecesByLocation;\n        this.kings = kings;\n        this.resetLegalMovesAndCheckStatus();\n        this.updateCheckMate();\n    }\n\n    private parsePieces(): ParsedPieces {\n        const piecesByLocation: PieceMap = {};\n        // For typescript consistency, pre-assign Kings so compiler doesn't get angry\n        let lightKing = new King('light', '', '');\n        let darkKing = new King('light', '', '');\n        for (const position of Object.keys(this.boardMap)) {\n            const piece = this.boardMap[position];\n            if (piece !== 'x') {\n                let pieceInstance;\n                // If char code of piece is lowercase, it is dark\n                const color = piece.charCodeAt(0) > 96 ? 'dark' : 'light';\n                if (piece === 'p' || piece === 'P') {\n                    pieceInstance = new Pawn(color, position);\n                }\n                else if (piece === 'r' || piece === 'R') {\n                    pieceInstance = new Rook(color, position, this.fen.castlingAvailability);\n                }\n                else if (piece === 'n' || piece === 'N') {\n                    pieceInstance = new Knight(color, position);\n                }\n                else if (piece === 'b' || piece === 'B') {\n                    pieceInstance = new Bishop(color, position);\n                }\n                else if (piece === 'q' || piece === 'Q') {\n                    pieceInstance = new Queen(color, position);\n                }\n                else {\n                    pieceInstance = new King(color, position, this.fen.castlingAvailability);\n                    if (piece === 'k') {\n                        darkKing = pieceInstance;\n                    }\n                    else {\n                        lightKing = pieceInstance;\n                    }\n                }\n                piecesByLocation[position] = pieceInstance;\n                this.piecesByColor[color].push(pieceInstance);\n            }\n        }\n        return { piecesByLocation, kings: { k: darkKing, K: lightKing } };\n    }\n\n    public getLegalMoves(position: string): string[] {\n        const piece = this.piecesByLocation[position];\n        if (piece) {\n            return [...piece.getLegalMoves(this.boardMap, this.fen)];\n        }\n        return [];\n    }\n\n    public move(from: string, to: string, skipValidation: boolean = false): string {\n        let movePiece = this.piecesByLocation[from];\n        if (movePiece) {\n            const legalMoves = movePiece.getLegalMoves(this.boardMap, this.fen);\n            if (legalMoves.includes(to) || skipValidation) {\n                let capturedPiece = false;\n                if (this.piecesByLocation[to] || (`${to[0]}${to[2]}` === this.fen.enPassantTargetSquare && movePiece.name === 'Pawn')) {\n                    let deleteLocation = to;\n                    if (`${to[0]}${to[2]}` === this.fen.enPassantTargetSquare && movePiece.name === 'Pawn') {\n                        deleteLocation = `${to[0]}-`;\n                        if (to[2] === '3') {\n                            deleteLocation += '4';\n                        }\n                        else {\n                            deleteLocation += '5';\n                        }\n                    }\n                    const deletePieceColor = this.piecesByLocation[deleteLocation].color;\n                    for (let i = 0; i < this.piecesByColor[deletePieceColor].length; i++) {\n                        if (this.piecesByColor[deletePieceColor][i] === this.piecesByLocation[deleteLocation]) {\n                            this.piecesByColor[deletePieceColor].splice(i, 1);\n                            break;\n                        }\n                    }\n                    capturedPiece = true;\n                    delete this.piecesByLocation[deleteLocation];\n                    this.boardMap[deleteLocation] = 'x';\n                }\n                movePiece.move(to);\n                if (movePiece.name === 'Pawn' && (movePiece.rank === 1 || movePiece.rank === 8)) {\n                    movePiece = new Queen(movePiece.color, movePiece.position);\n                }\n                this.piecesByLocation[to] = movePiece;\n                this.boardMap[to] = movePiece.code;\n                delete this.piecesByLocation[from];\n                this.boardMap[from] = 'x';\n                this.updateFEN(movePiece, capturedPiece);\n                this.resetLegalMovesAndCheckStatus();\n                this.updateCheckMate();\n            }\n        }\n        return this.fenString;\n    }\n\n    private updateFEN(movePiece: Piece, capturedPiece: boolean): void {\n        this.fen.piecePlacement = rebuildPlacementFromMap(this.boardMap);\n        if (movePiece.color === 'dark') {\n            this.fen.fullMoveNumber += 1;\n        }\n        if (movePiece.name === 'Pawn' || capturedPiece) {\n            this.fen.halfMoveClock = 0;\n        }\n        else {\n            this.fen.halfMoveClock += 1;\n        }\n        this.updateEnPassant(movePiece);\n        this.updateCastling(movePiece);\n        this.fen.activeColor = movePiece.color === 'light' ? 'b' : 'w';\n    }\n\n    private updateCastling(movePiece: Piece): void {\n        // If Piece is king, check if move is castling\n        if (this.fen.castlingAvailability !== '-' && movePiece instanceof King) {\n            const halfMoveClock = this.fen.halfMoveClock;\n            const fullMoveClock = this.fen.fullMoveNumber;\n            // check if it has gone to the castling long or short position\n            if (movePiece.color === 'light') {\n                if (movePiece.position === 'g-1' && this.fen.castlingAvailability.includes('K')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('K', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('Q', '');\n                    this.move('h-1', 'f-1', true);\n                }\n                else if (movePiece.position === 'c-1' && this.fen.castlingAvailability.includes('Q')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('Q', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('K', '');\n                    this.move('a-1', 'd-1', true);\n                }\n            }\n            else {\n                if (movePiece.position === 'g-8' && this.fen.castlingAvailability.includes('k')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('k', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('q', '');\n                    this.move('h-8', 'f-8', true);\n                }\n                else if (movePiece.position === 'c-8' && this.fen.castlingAvailability.includes('q')) {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('q', '');\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('k', '');\n                    this.move('a-8', 'd-8', true);\n                }\n            }\n            // Reset move number and clock due to moving rook\n            this.fen.halfMoveClock = halfMoveClock;\n            this.fen.fullMoveNumber = fullMoveClock;\n            movePiece.canCastleShort = false;\n            movePiece.canCastleLong = false;\n        }\n        else if (movePiece instanceof Rook && this.fen.castlingAvailability !== '-') {\n            if (movePiece.color === 'light') {\n                if (this.fen.castlingAvailability.includes('K') && movePiece.lastPosition === 'h-1') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('K', '');\n                }\n                else if (this.fen.castlingAvailability.includes('Q') && movePiece.lastPosition === 'a-1') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('Q', '');\n                }\n            }\n            else { // movePiece.color === 'dark'\n                if (this.fen.castlingAvailability.includes('k') && movePiece.lastPosition === 'h-8') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('k', '');\n                }\n                else if (this.fen.castlingAvailability.includes('q') && movePiece.lastPosition === 'a-8') {\n                    this.fen.castlingAvailability = this.fen.castlingAvailability.replace('q', '');\n                }\n            }\n            movePiece.canCastle = false;\n            movePiece.castleSide = '-';\n        }\n        if (this.fen.castlingAvailability.length === 0) {\n            this.fen.castlingAvailability = '-';\n        }\n    }\n\n    private updateEnPassant(movePiece: Piece) {\n        this.fen.enPassantTargetSquare = '-';\n        if (movePiece instanceof Pawn) {\n            if (movePiece.inStartingPosition) {\n                movePiece.inStartingPosition = false;\n                // If the pawn just moved two spaces\n                if (movePiece.lastPosition && Math.abs(Number(movePiece.lastPosition[2]) - Number(movePiece.position[2])) === 2) {\n                    if (Number(movePiece.lastPosition[2]) > movePiece.rank) {\n                        this.fen.enPassantTargetSquare = `${movePiece.file}${movePiece.rank + 1}`;\n                    }\n                    else {\n                        this.fen.enPassantTargetSquare = `${movePiece.file}${movePiece.rank - 1}`;\n                    }\n                }\n            }\n        }\n    }\n\n    protected filterKingMovesDanger(king: King, enemyPieces: Piece[]): void {\n        // this should just return legalMoves and shouldn't recalculate\n        const kingMoves = king.getLegalMoves(this.boardMap, this.fen);\n        const dangerMoves: string[] = [];\n        for (const enemyPiece of enemyPieces) {\n            if (enemyPiece.legalMoves) {\n                if (enemyPiece instanceof Pawn) {\n                    for (const move of enemyPiece.legalMoves) {\n                        // If move is a capture move/diagonal move\n                        if (move[0] !== enemyPiece.file) {\n                            dangerMoves.push(move);\n                        }\n                    }\n                }\n                else {\n                    dangerMoves.push(...enemyPiece.legalMoves);\n                }\n                for (const defense of enemyPiece.defending) {\n                    dangerMoves.push(defense.position);\n                }\n            }\n        }\n        king.legalMoves = kingMoves.filter(move => !dangerMoves.includes(move));\n    }\n\n    // Mutates the list of moves to remove any moves that don't defend king\n    protected filterMovesCheck(piece: Piece, king: King, enemyPieces: Piece[], moves: string[]): string[] {\n        const checkedByPiece = king.checkBy ? this.piecesByLocation[king.checkBy] : null;\n        let filteredMoves: string[] = [];\n        if (checkedByPiece && moves.length > 0) {\n            const checkType = checkedByPiece.moveType;\n            // For King pieces, filter out moves that overlap enemy moves\n            if (piece.name === 'King') {\n                const dangerMoves: string[] = [];\n                for (const enemyPiece of enemyPieces) {\n                    if (enemyPiece.legalMoves) {\n                        dangerMoves.push(...enemyPiece.legalMoves);\n                        for (const defense of enemyPiece.defending) {\n                            dangerMoves.push(defense.position);\n                        }\n                    }\n                }\n                // Check straight line pieces\n                if (checkedByPiece instanceof Queen || checkedByPiece instanceof Rook) {\n                    // If king and attacker are on the same row\n                    if (checkedByPiece.rank === king.rank) {\n                        // If attacker is to the left of king\n                        if (checkedByPiece.file.charCodeAt(0) < king.file.charCodeAt(0)) {\n                            // King cannot move right\n                            dangerMoves.push(`${shiftChar(king.file, 1)}-${king.rank}`);\n                        }\n                        // Else the attacker is to the right of king\n                        else {\n                            // King cannot move left\n                            dangerMoves.push(`${shiftChar(king.file, -1)}-${king.rank}`);\n                        }\n                    }\n                    // Else if king and attacker are on same column\n                    else if (checkedByPiece.file === king.file) {\n                        // If attacker is above king\n                        if (checkedByPiece.rank > king.rank) {\n                            // King cannot move down\n                            dangerMoves.push(`${king.file}-${king.rank - 1}`);\n                        }\n                        // Else attacker is below king\n                        else {\n                            // King cannot move up\n                            dangerMoves.push(`${king.file}-${king.rank + 1}`);\n                        }\n                    }\n                }\n                // Check diagonal pieces\n                if (checkedByPiece instanceof Queen || checkedByPiece instanceof Bishop) {\n                    // If king is up-left\n                    if (king.file.charCodeAt(0) < checkedByPiece.file.charCodeAt(0) && king.rank > checkedByPiece.rank) {\n                        // King cannot move up-left\n                        dangerMoves.push(`${shiftChar(king.file, -1)}-${king.rank + 1}`);\n                    }\n                    // If king is up-right\n                    else if (king.file.charCodeAt(0) > checkedByPiece.file.charCodeAt(0) && king.rank > checkedByPiece.rank) {\n                        dangerMoves.push(`${shiftChar(king.file, 1)}-${king.rank + 1}`);\n                    }\n                    // If king is down-left\n                    else if (king.file.charCodeAt(0) < checkedByPiece.file.charCodeAt(0) && king.rank < checkedByPiece.rank) {\n                        dangerMoves.push(`${shiftChar(king.file, -1)}-${king.rank - 1}`);\n                    }\n                    // If king is down-right\n                    else if (king.file.charCodeAt(0) > checkedByPiece.file.charCodeAt(0) && king.rank < checkedByPiece.rank) {\n                        dangerMoves.push(`${shiftChar(king.file, 1)}-${king.rank - 1}`);\n                    }\n                }\n                filteredMoves = moves.filter(move => !dangerMoves.includes(move));\n            }\n            // Else, filter out moves that don't defend King\n            else {\n                const enemyMoves = checkedByPiece.legalMoves;\n                const enemyLocation = checkedByPiece.position;\n                if (enemyMoves && enemyLocation) {\n                    const validMoves: string[] = [enemyLocation];\n                    // If consecutive movement, either block or take piece\n                    if (checkType === 'consecutive') {\n                        // If king and attacker are on same vertical line, add all ranks between and enemyLocation\n                        if (checkedByPiece.file === king.file) {\n                            // If king is above attacker\n                            if (king.rank > checkedByPiece.rank) {\n                                for (let i = king.rank - 1; i > checkedByPiece.rank; i--) {\n                                    const move = `${king.file}-${i}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                            // Else king is below attacker\n                            else {\n                                for (let i = checkedByPiece.rank - 1; i > king.rank; i--) {\n                                    const move = `${king.file}-${i}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                        }\n                        // If king and attacker are on the same rank\n                        else if (checkedByPiece.rank === king.rank) {\n                            const kingFile = king.file.charCodeAt(0);\n                            const enemyFile = checkedByPiece.file.charCodeAt(0);\n                            // If king is to the left of the attacker\n                            if (kingFile < enemyFile) {\n                                for (let i = kingFile + 1; i < enemyFile; i++) {\n                                    const move = `${String.fromCharCode(i)}-${king.rank}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                            // Else king is to the right of the attacker\n                            else {\n                                for (let i = enemyFile + 1; i < kingFile; i++) {\n                                    const move = `${String.fromCharCode(i)}-${king.rank}`;\n                                    validMoves.push(move);\n                                }\n                            }\n                        }\n                        // Else they are diagonal\n                        else {\n                            const kingFile = king.file.charCodeAt(0);\n                            const enemyFile = checkedByPiece.file.charCodeAt(0);\n                            // If king is to the left, use king, else, use enemy\n                            let fileTracker = kingFile < enemyFile ? kingFile + 1 : enemyFile + 1;\n                            let startRank;\n                            let endRank;\n                            // If king is above\n                            if (king.rank > checkedByPiece.rank) {\n                                startRank = checkedByPiece.rank + 1;\n                                endRank = king.rank;\n                            }\n                            // Else king is below\n                            else {\n                                startRank = king.rank + 1;\n                                endRank = checkedByPiece.rank;\n                            }\n                            for (let i = startRank; i < endRank; i++) {\n                                const move = `${String.fromCharCode(fileTracker)}-${i}`;\n                                validMoves.push(move);\n                                fileTracker += 1;\n                            }\n                        }\n                    }\n                    // Else, can only take piece out\n                    filteredMoves = moves.filter(move => validMoves.includes(move));\n                }\n            }\n        }\n        piece.legalMoves = filteredMoves;\n        return filteredMoves;\n    }\n\n    // Remove moves that would expose king to an attacker\n    protected filterMovesThatExposeKing(piece: Piece, king: King): string[] {\n        // Simulate move and see if king is in check\n        const pieceMoves = piece.getLegalMoves(this.boardMap, this.fen);\n        const kingOriginalCheckStatus = king.isInCheck;\n        const kingOriginalCheckBy = king.checkBy;\n        const filteredMoves: string[] = [];\n        for (const move of pieceMoves) {\n            const testBoard: BoardMap = JSON.parse(JSON.stringify(this.boardMap));\n            testBoard[move] = piece.code;\n            testBoard[piece.position] = 'x';\n            king.getCheckStatus(testBoard);\n            if (!king.isInCheck) {\n                filteredMoves.push(move);\n            }\n        }\n        // Reset king check status\n        king.isInCheck = kingOriginalCheckStatus;\n        king.checkBy = kingOriginalCheckBy;\n        return filteredMoves;\n    }\n\n    private processMovesForColor(color: Color, filterMovesCheck: boolean): void {\n        let pieces: Piece[];\n        let king: King;\n        let enemyPieces: Piece[];\n        if (color === 'light') {\n            pieces = this.piecesByColor.light;\n            king = this.kings.K;\n            enemyPieces = this.piecesByColor.dark;\n        }\n        else {\n            pieces = this.piecesByColor.dark;\n            king = this.kings.k;\n            enemyPieces = this.piecesByColor.light;\n        }\n        for (const piece of pieces) {\n            const moves = piece.getLegalMoves(this.boardMap, this.fen);\n            if (filterMovesCheck) {\n                this.filterMovesCheck(piece, king, enemyPieces, moves);\n            }\n            if (piece instanceof King) {\n                this.filterKingMovesDanger(piece, enemyPieces);\n            }\n            else {\n                piece.legalMoves = this.filterMovesThatExposeKing(piece, king);\n            }\n        }\n    }\n\n    private resetLegalMovesAndCheckStatus(): void {\n        let justMoved: Color;\n        let activeColor: Color;\n        if (this.fen.activeColor === 'w') {\n            justMoved = 'dark';\n            activeColor = 'light';\n        }\n        else {\n            justMoved = 'light';\n            activeColor = 'dark';\n        }\n        for (const location of Object.keys(this.piecesByLocation)) {\n            this.piecesByLocation[location].resetLegalMoves();\n        }\n        this.processMovesForColor(justMoved, false);\n        this.updateCheckStatus();\n        this.processMovesForColor(activeColor, this.checkStatus !== 'none');\n        this.checkTieStatus();\n    }\n\n    private checkTieStatus(): void {\n        // Tie is declared when active color is not in check but has no legal moves available\n        if (this.checkStatus === 'none') {\n            const activeColor = this.fen.activeColor === 'w' ? 'light' : 'dark';\n            let canMove = false;\n            for (const piece of this.piecesByColor[activeColor]) {\n                if (piece.getLegalMoves(this.boardMap, this.fen).length > 0) {\n                    canMove = true;\n                    break;\n                }\n            }\n            if (!canMove) {\n                this.tie = true;\n            }\n        }\n    }\n\n    private getPiecesForOppositeColor(color: Color): Piece[] {\n        const oppositeColor = color === 'light' ? 'dark' : 'light';\n        return this.piecesByColor[oppositeColor];\n    }\n\n    private updateCheckStatus(): void {\n        /*\n        Rules for Check:\n            1. King pieces lies within an enemy piece's legal positions\n            2. You only need to check if active color's king is in check\n        Consideration:\n            * If a FEN string is a checkmate, this may not calculate properly\n         */\n        let checkStatus: CheckStatus = 'none';\n        const activeColor = this.fen.activeColor === 'w' ? 'light' : 'dark';\n        const king = activeColor === 'light' ? this.kings.K : this.kings.k;\n        const isCheck = king.getCheckStatus(this.boardMap);\n        if (isCheck.check) {\n            checkStatus = activeColor;\n        }\n        this.checkStatus = checkStatus;\n    }\n\n    private updateCheckMate(): void {\n        /*\n        Rules for checkmate:\n            1. King cannot move\n            2. No pieces can cover the King\n         */\n        const possibleMoves = [];\n        if (this.checkStatus !== 'none') {\n            const pieces = this.piecesByColor[this.checkStatus];\n            for (const piece of pieces) {\n                // This should already be pre-calculated and filtered for checked move sets\n                const legalMoves = piece.getLegalMoves(this.boardMap, this.fen);\n                possibleMoves.push(...legalMoves);\n            }\n            this.checkMateStatus = possibleMoves.length === 0;\n        }\n    }\n\n    /*\n    private promotePawn(pawn: Piece): Piece {\n        return new Queen(pawn.color, pawn.position);\n    }\n     */\n\n    public print(): void {\n        console.log(`\n8|${this.boardMap['a-8']}|${this.boardMap['b-8']}|${this.boardMap['c-8']}|${this.boardMap['d-8']}|${this.boardMap['e-8']}|${this.boardMap['f-8']}|${this.boardMap['g-8']}|${this.boardMap['h-8']}|\n7|${this.boardMap['a-7']}|${this.boardMap['b-7']}|${this.boardMap['c-7']}|${this.boardMap['d-7']}|${this.boardMap['e-7']}|${this.boardMap['f-7']}|${this.boardMap['g-7']}|${this.boardMap['h-7']}|\n6|${this.boardMap['a-6']}|${this.boardMap['b-6']}|${this.boardMap['c-6']}|${this.boardMap['d-6']}|${this.boardMap['e-6']}|${this.boardMap['f-6']}|${this.boardMap['g-6']}|${this.boardMap['h-6']}|\n5|${this.boardMap['a-5']}|${this.boardMap['b-5']}|${this.boardMap['c-5']}|${this.boardMap['d-5']}|${this.boardMap['e-5']}|${this.boardMap['f-5']}|${this.boardMap['g-5']}|${this.boardMap['h-5']}|\n4|${this.boardMap['a-4']}|${this.boardMap['b-4']}|${this.boardMap['c-4']}|${this.boardMap['d-4']}|${this.boardMap['e-4']}|${this.boardMap['f-4']}|${this.boardMap['g-4']}|${this.boardMap['h-4']}|\n3|${this.boardMap['a-3']}|${this.boardMap['b-3']}|${this.boardMap['c-3']}|${this.boardMap['d-3']}|${this.boardMap['e-3']}|${this.boardMap['f-3']}|${this.boardMap['g-3']}|${this.boardMap['h-3']}|\n2|${this.boardMap['a-2']}|${this.boardMap['b-2']}|${this.boardMap['c-2']}|${this.boardMap['d-2']}|${this.boardMap['e-2']}|${this.boardMap['f-2']}|${this.boardMap['g-2']}|${this.boardMap['h-2']}|\n1|${this.boardMap['a-1']}|${this.boardMap['b-1']}|${this.boardMap['c-1']}|${this.boardMap['d-1']}|${this.boardMap['e-1']}|${this.boardMap['f-1']}|${this.boardMap['g-1']}|${this.boardMap['h-1']}|\n  a b c d e g h h`);\n    }\n\n    public get fenString(): string {\n        return stringifyFEN(this.fen);\n    }\n}\n","import { Color, Piece } from '../pieces/Piece';\r\nimport { BoardMap, FEN } from '../../utils/utils';\r\n\r\nexport abstract class AI {\r\n    color: Color;\r\n\r\n    protected constructor(color: Color) {\r\n        this.color = color;\r\n    }\r\n\r\n    move(board: BoardMap, fen: FEN, pieces: Piece[]): { from: string, to: string } {\r\n        return { from: '', to: '' };\r\n    }\r\n}\r\n\r\nexport default AI;\r\n","import AI from './AI';\r\nimport { Color, Piece } from '../pieces/Piece';\r\nimport { BoardMap, FEN } from '../../utils/utils';\r\n\r\nexport class RandomMover extends AI {\r\n    name: string;\r\n\r\n    constructor(color: Color) {\r\n        super(color);\r\n        this.name = 'Random Mover';\r\n    }\r\n\r\n    move(board: BoardMap, fen: FEN, pieces: Piece[]): { from: string, to: string } {\r\n        const allMoves = [];\r\n        for (const piece of pieces) {\r\n            for (const move of piece.getLegalMoves(board, fen)) {\r\n                allMoves.push({ from: piece.position, to: move });\r\n            }\r\n        }\r\n        if (allMoves.length > 0) {\r\n            const randInt = Math.floor(Math.random() * allMoves.length);\r\n            return allMoves[randInt];\r\n        }\r\n        return { from: '', to: '' };\r\n    }\r\n}\r\n","import AI from './AI';\r\nimport { Color, Piece } from '../pieces/Piece';\r\nimport { BoardMap, FEN } from '../../utils/utils';\r\n\r\ninterface GenericScore {\r\n    [index: string]: any\r\n}\r\n\r\nexport class MatrixEvaluator extends AI {\r\n    name: string;\r\n    scores: GenericScore = {\r\n        pieces: {\r\n            Pawn: 1,\r\n            Knight: 2,\r\n            Bishop: 3,\r\n            Rook: 3,\r\n            Queen: 4,\r\n            King: 5,\r\n        },\r\n        capture: {\r\n            multiplier: 2,\r\n        },\r\n        pressure: {\r\n            multiplier: 1.5,\r\n        },\r\n        // Danger scores represent how dangerous it is to lose this piece\r\n        danger: {\r\n            multiplier: -1,\r\n        },\r\n        defending: {\r\n            multiplier: 1.5,\r\n        },\r\n        defended: {\r\n            multiplier: 1.5,\r\n        },\r\n    }\r\n\r\n    constructor(color: Color) {\r\n        super(color);\r\n        this.name = 'Matrix Evaluator';\r\n    }\r\n\r\n    move(board: BoardMap, fen: FEN, pieces: Piece[]): { from: string, to: string } {\r\n        const allMoves = [];\r\n        for (const piece of pieces) {\r\n            if (piece.color === this.color) {\r\n                for (const move of piece.getLegalMoves(board, fen)) {\r\n                    const score = this.evaluateMove(piece, move, board, fen, pieces);\r\n                    allMoves.push({ from: piece.position, to: move, score });\r\n                }\r\n            }\r\n        }\r\n        if (allMoves.length > 0) {\r\n            // Sort in ascending order\r\n            allMoves.sort((a, b) => a.score - b.score);\r\n            const highScore = allMoves[allMoves.length - 1].score;\r\n            const maxMoveScores = allMoves.filter((move) => move.score === highScore);\r\n            const randInt = Math.floor(Math.random() * maxMoveScores.length);\r\n            return { from: maxMoveScores[randInt].from, to: maxMoveScores[randInt].to };\r\n        }\r\n        return { from: '', to: '' };\r\n    }\r\n\r\n    evaluateMove(evaluatedPiece: Piece, move: string, board: BoardMap, fen: FEN, pieces: Piece[]): number {\r\n        let score = 0;\r\n        const boardOccupation = board[move];\r\n        if (boardOccupation !== 'x') {\r\n            const piece = this.findPieceAtPosition(move, pieces);\r\n            if (piece) {\r\n                score += this.scores.pieces[piece.name] * this.scores.capture.multiplier;\r\n            }\r\n            const piecesWithMovesAtPosition = this.findPiecesWithMovesToPosition(move, pieces);\r\n            if (piecesWithMovesAtPosition) {\r\n                const defenders = piecesWithMovesAtPosition.filter((piece) => piece.color === this.color);\r\n                const attackers = piecesWithMovesAtPosition.filter((piece) => piece.color !== this.color);\r\n                for (const attacker of attackers) {\r\n                    score += this.scores.pieces[attacker.name] * this.scores.danger.multiplier;\r\n                }\r\n                for (const defender of defenders) {\r\n                    score += this.scores.pieces[defender.name] * this.scores.defending.multiplier;\r\n                }\r\n            }\r\n            if (this.moveIsForward(evaluatedPiece, move)) {\r\n                score += 1;\r\n            }\r\n        }\r\n        return score;\r\n    }\r\n\r\n    findPieceAtPosition(move: string, pieces: Piece[]): Piece | undefined {\r\n        return pieces.find((piece) => piece.position === move);\r\n    }\r\n\r\n    findPiecesWithMovesToPosition(move: string, pieces: Piece[]): Piece[] | undefined {\r\n        return pieces.filter((piece) => piece.legalMoves?.includes(move));\r\n    }\r\n\r\n    // If move pushes piece towards opposite end\r\n    moveIsForward(evaluatedPiece: Piece, move: string): boolean {\r\n        if (this.color === 'light') {\r\n            return Number(move[2]) > evaluatedPiece.rank;\r\n        }\r\n        return Number(move[2]) < evaluatedPiece.rank;\r\n    }\r\n}\r\n","\nimport { defineComponent } from 'vue';\nimport CanvasBoard from '@/board/CanvasBoard.vue';\nimport { Selection } from '@/board/BoardUtils';\nimport { FEN } from '@/utils/utils';\nimport { Chess } from '@/engine/Chess';\nimport AI from '@/engine/ai/AI';\nimport { RandomMover } from '@/engine/ai/RandomMover';\nimport { MatrixEvaluator } from '@/engine/ai/MatrixEvaluator';\n\ninterface AppData {\n    containerHeight: number,\n    containerWidth: number,\n    isMounted: boolean,\n    legalMoves: string[],\n    startingFen: string,\n    fenString: string,\n    fen: FEN,\n    useAi: boolean,\n    ai: null | AI,\n    engine: Chess,\n    selectedPiece: string,\n}\n\ninterface MovePayload {\n    from: string,\n    to: string,\n    piece: string,\n}\n\nexport default defineComponent({\n    name: 'Play',\n    components: {\n        CanvasBoard,\n    },\n    data(): AppData {\n        return {\n            containerHeight: 300,\n            containerWidth: 300,\n            isMounted: false,\n            legalMoves: [],\n            startingFen: '',\n            fenString: '',\n            fen: {\n                piecePlacement: '',\n                activeColor: '',\n                castlingAvailability: '',\n                enPassantTargetSquare: '',\n                halfMoveClock: 0,\n                fullMoveNumber: 0,\n            },\n            useAi: false,\n            ai: null,\n            engine: new Chess(),\n            selectedPiece: '',\n        };\n    },\n    mounted() {\n        this.fenString = String(this.$route.query.fen);\n        this.startingFen = this.fenString;\n        this.useAi = this.$route.query.ai === 'true';\n        if (this.useAi) {\n            console.log('Creating AI player');\n            if (this.$route.query.aiType === 'RandomMover') {\n                this.ai = new RandomMover('dark');\n            }\n            else if (this.$route.query.aiType === 'MatrixEvaluator') {\n                this.ai = new MatrixEvaluator('dark');\n            }\n        }\n        this.engine = new Chess(this.fenString);\n        console.log('created new engine');\n        this.onResize();\n        window.addEventListener('resize', this.onResize);\n        this.isMounted = true;\n    },\n    methods: {\n        onResize() {\n            this.containerHeight = window.innerHeight;\n            this.containerWidth = window.innerWidth * 0.6;\n        },\n        calculateLegalMoves(selection: Selection) {\n            this.selectedPiece = `${selection.piece}, ${selection.place}`;\n            this.legalMoves = this.engine.getLegalMoves(selection.place);\n        },\n        clearLegalMoves() {\n            this.selectedPiece = '';\n            this.legalMoves.length = 0;\n        },\n        makeMove(payload: MovePayload) {\n            this.fenString = this.engine.move(payload.from, payload.to);\n            if (this.ai && this.engine.fen.activeColor === 'b') {\n                // @ts-ignore\n                const move = this.ai.move(this.engine.boardMap, this.engine.fen, this.engine.piecesByColor.dark);\n                console.log(`AI move: from ${move.from} to ${move.to}`);\n                this.fenString = this.engine.move(move.from, move.to);\n            }\n        },\n        restart() {\n            this.fenString = this.startingFen;\n            this.engine = new Chess(this.fenString);\n        },\n    },\n});\n","import { render } from \"./Play.vue?vue&type=template&id=2aff1b75&ts=true\"\nimport script from \"./Play.vue?vue&type=script&lang=ts\"\nexport * from \"./Play.vue?vue&type=script&lang=ts\"\n\nimport \"./Play.vue?vue&type=style&index=0&id=2aff1b75&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Nate\\\\WebstormProjects\\\\simply-chess\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router';\nimport MainMenu from '@/menus/MainMenu.vue';\nimport Play from '@/menus/Play.vue';\n\nconst routes = [\n    { path: '/', component: MainMenu },\n    { path: '/play', component: Play },\n];\n\nexport default createRouter({\n    history: createWebHashHistory(),\n    routes,\n});\n","import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from '@/router';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\n\nconst app = createApp(App);\napp.use(router);\napp.mount('#app');\n","module.exports = __webpack_public_path__ + \"img/113.8e8aadb6.svg\";","module.exports = __webpack_public_path__ + \"img/110.7ff2da55.svg\";"],"sourceRoot":""}